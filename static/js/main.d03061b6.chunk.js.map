{"version":3,"sources":["SoundPatternBuilder.js","components/MatterScene.js","components/GallerySection.js","components/ComposeSlideSection.js","components/LastSection.js","components/SPBex.js","App.js","reportWebVitals.js","index.js"],"names":["renderShapePreview","shapeType","cx","cy","color","scale","startsWith","scaled","element","React","createElement","transform","renderStarShapeFromMatter","renderHollowStarShape","renderCompactStarShape","renderDonutShape","renderSmallDonutShape","renderSmallFilledCircle","renderFatStarShape","renderHollowFatStarShape","renderMiniFatStarShape","renderTriangleShape","renderSquareShape","renderCircleShape","renderSmallSquareShape","renderWideRectangleShape","renderHalfCircleShape","renderWideIsoscelesTriangle","renderDiamondSquareShape","renderSmallCircleShape","renderWavySvgDonutShape","renderFourPointStarShape","renderAsteriskShape","renderPointyDonutShape","renderEightPointStarShape","renderSixArmAsteriskShape","renderGearDonutShape","renderBroadEightPointStar","renderBarAsteriskShape","x1","y1","x2","y2","stroke","strokeWidth","strokeDasharray","d","fill","points","x","y","width","height","rx","strokeLinecap","r","SHAPES_BY_CATEGORY","박자","Array","from","length","_","i","음계","배경음","강세","CATEGORIES","PITCH_ORDER","rhythmSounds","#4284F3","#6EC1A1","#F5BC62","#FE6E3D","#EF7A88","durationSounds","pitchGroups","getClosestLeadY","svgHeight","centerY","leadYs","closest","minDiff","ly","diff","Math","abs","arguments","undefined","elements","angle","PI","sin","cos","push","key","isSelected","innerDist","outerDist","sqrt","size","join","translateX","translateY","radius","baseRadius","barWidth","SoundPatternBuilder","_ref","_svgRef$current25","presetShapes","readOnly","onPlaybackEnd","resetPlayback","shapes","setShapes","useState","selectedCategory","setSelectedCategory","selectedShape","setSelectedShape","selectedColor","setSelectedColor","selectedId","setSelectedId","draggingId","setDraggingId","isPlaying","setIsPlaying","isPaused","setIsPaused","playheadX","setPlayheadX","showPitchLines","setShowPitchLines","showSaveModal","setShowSaveModal","composerName","setComposerName","shapePage","setShapePage","palettePos","setPalettePos","svgRef","useRef","shapesRef","startTimeRef","pauseTimeRef","animationRef","activeAudios","colorPaletteRef","isPlayingRef","isPausedRef","currentShapes","startIndex","paginatedShapes","slice","useEffect","map","shape","id","uuidv4","current","svgRect","getBoundingClientRect","find","s","svgWidth","xPercent","yPercent","offsetY","left","top","handleKeyDown","e","prev","filter","window","addEventListener","removeEventListener","playSoundForShape","pitch","elapsed","type","lastPlayed","customColor","audio","_svgRef$current","files","Audio","floor","random","volume","clientWidth","shapeX","progressRatio","max","min","currentTime","PLAYBACK_DURATION","play","catch","group","validGroups","includes","C","D","E","F","G","A","B","C'","step","timestamp","_svgRef$current2","_svgRef$current3","clientHeight","newX","cancelAnimationFrame","forEach","shapeY","getPitchFromY","index","round","NUM_PITCH_LINES","requestAnimationFrame","seekPlayback","direction","_svgRef$current4","delta","prevX","nextX","addShape","shapeIdParam","categoryParam","newShape","initialShape","className","ref","onMouseMove","newShapes","rawY","clientY","snappedY","clientX","onMouseUp","onClick","target","currentTarget","_svgRef$current5","_svgRef$current6","_svgRef$current7","_svgRef$current8","_svgRef$current9","_svgRef$current0","onMouseDown","stopPropagation","_svgRef$current1","_svgRef$current10","renderWavyLineShape","_svgRef$current11","_svgRef$current12","renderCurvedEmotionLine","_svgRef$current13","_svgRef$current14","renderSharpBeatLine","_svgRef$current15","_svgRef$current16","renderAccentBar","barHeight","_svgRef$current17","_svgRef$current18","renderDecreasingVolumeAccent","adjustedY","topY","bottomY","_svgRef$current19","_svgRef$current20","renderSwellingAccentBar","controlOffset","pathData","_svgRef$current21","_svgRef$current22","renderGrowingAccentBar","topStart","baseHeight","bottomStart","controlX","maxHeight","_svgRef$current23","_svgRef$current24","renderShrinkingAccentBar","minHeight","HITBOX_SIZE","pointerEvents","Fragment","style","display","alignItems","gap","disabled","shapeId","viewBox","cat","representativeShape","marginTop","xmlns","togglePlayPause","performance","now","a","pause","placeholder","value","onChange","handleDownload","toPng","backgroundColor","cacheBust","embedWebFonts","then","dataUrl","download","Date","JSON","parse","localStorage","getItem","console","warn","error","err","position","background","padding","borderRadius","boxShadow","zIndex","cursor","boxSizing","outline","groups","newGroup","checked","decomp","Matter","Common","setDecomp","MatterScene","sceneRef","engineRef","runnerRef","hasStarted","setHasStarted","Engine","Render","World","Bodies","Body","Mouse","MouseConstraint","Events","Runner","container","engine","create","world","runner","render","options","innerWidth","innerHeight","wireframes","Object","assign","canvas","run","sounds","src","createHalfCircle","segments","angleStep","vertices","translatedVertices","v","fromVertices","restitution","friction","fillStyle","donut","parts","circle","isSensor","rectangle","polygon","starParts","w","h","rect","setAngle","walls","isStatic","visible","add","mouse","mouseConstraint","constraint","stiffness","pixelRatio","mousewheel","on","event","pairs","bodyA","bodyB","body","indexOf","paused","clickedBody","source","stop","clear","remove","handleStart","document","querySelectorAll","fontSize","fontFamily","fontWeight","opacity","transition","dummyItems","image","composer","likes","comments","GallerySection","galleryItems","setGalleryItems","sort","setSort","visibleRefs","visibleIds","setVisibleIds","clickedId","setClickedId","observer","IntersectionObserver","entries","entry","isIntersecting","dataset","threshold","observe","unobserve","sortedItems","b","justifyContent","item","data-id","el","String","transitionDelay","log","shapeData","alt","setTimeout","handleLike","styles","section","overflow","scrollSnapAlign","ellipse","maxWidth","scrollIcon","animation","ComposeSlideSection","textPathRef","sectionRef","showScrollIcon","setShowScrollIcon","animationFrame","offset","animateOffset","setAttribute","timer","clearTimeout","ry","letterSpacing","href","startOffset","textAnchor","dominantBaseline","svg","textBlock","right","bottom","textAlign","lineHeight","name","marginBottom","subtitle","paragraph","LastSection","preserveAspectRatio","objectFit","SPBex","showModal","setShowModal","setResetPlayback","handlePlaybackEnd","flexDirection","border","handleRetry","App","audioRef","matterRef","soundRef","slideRef","isMatterVisible","setIsMatterVisible","isSoundVisible","setIsSoundVisible","isSlideVisible","setIsSlideVisible","playSound","handleWheel","handleClick","disconnect","_ref2","_ref3","isVisible","margin","idx","marginRight","overflowY","paddingTop","reportWebVitals","onPerfEntry","Function","__webpack_require__","bind","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","createRoot","getElementById","StrictMode"],"mappings":"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","file":"static/js/main.d03061b6.chunk.js","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport \"./soundBuilder.css\";\nimport { toPng } from \"html-to-image\";\nimport download from \"downloadjs\";\nimport copy from \"copy-to-clipboard\";\n\n\nconst renderShapePreview = (shapeType, cx, cy) => {\n  const color = \"#4C3A2E\";\n\n  // 🔹 도형 종류에 따라 스케일 조정\n  const isPitchShape = shapeType.startsWith(\"음계\");\n  const scale = isPitchShape ? 0.8 : 0.45;\n\n  const scaled = (element) => (\n    <g transform={`scale(${scale}) translate(${cx / scale - cx}, ${cy / scale - cy})`}>\n      {element}\n    </g>\n  );\n\n  switch (shapeType) {\n    // 박자\n    case \"박자-1\": return scaled(renderStarShapeFromMatter(cx, cy, color));\n    case \"박자-2\": return scaled(renderHollowStarShape(cx, cy, color));\n    case \"박자-3\": return scaled(renderCompactStarShape(cx, cy, color));\n    case \"박자-4\": return scaled(renderDonutShape(cx, cy, color));\n    case \"박자-5\": return scaled(renderSmallDonutShape(cx, cy, color));\n    case \"박자-6\": return scaled(renderSmallFilledCircle(cx, cy, color));\n    case \"박자-7\": return scaled(renderFatStarShape(cx, cy, color));\n    case \"박자-8\": return scaled(renderHollowFatStarShape(cx, cy, color));\n    case \"박자-9\": return scaled(renderMiniFatStarShape(cx, cy, color));\n\n    // 음계\n    case \"음계-1\": return scaled(renderTriangleShape(cx, cy, color));\n    case \"음계-2\": return scaled(renderSquareShape(cx, cy, color));\n    case \"음계-3\": return scaled(renderCircleShape(cx, cy, color));\n    case \"음계-4\": return scaled(renderSmallSquareShape(cx, cy, color));\n    case \"음계-5\": return scaled(renderWideRectangleShape(cx, cy, color));\n    case \"음계-6\": return scaled(renderHalfCircleShape(cx, cy, color));\n    case \"음계-7\": return scaled(renderWideIsoscelesTriangle(cx, cy, color));\n    case \"음계-8\": return scaled(renderDiamondSquareShape(cx, cy, color));\n    case \"음계-9\": return scaled(renderSmallCircleShape(cx, cy, color));\n    case \"음계-10\": return scaled(renderWavySvgDonutShape(cx, cy, color));\n    case \"음계-11\": return scaled(renderFourPointStarShape(cx, cy, color));\n    case \"음계-12\": return scaled(renderAsteriskShape(cx, cy, color));\n    case \"음계-13\": return scaled(renderPointyDonutShape(cx, cy, color));\n    case \"음계-14\": return scaled(renderEightPointStarShape(cx, cy, color));\n    case \"음계-15\": return scaled(renderSixArmAsteriskShape(cx, cy, color));\n    case \"음계-16\": return scaled(renderGearDonutShape(cx, cy, color));\n    case \"음계-17\": return scaled(renderBroadEightPointStar(cx, cy, color));\n    case \"음계-18\": return scaled(renderBarAsteriskShape(cx, cy, color));\n\n    // 배경음\n   // 배경음\ncase \"배경음-1\":\n  return (\n    <line\n      x1={cx - 30}\n      y1={cy}\n      x2={cx + 30}\n      y2={cy}\n      stroke={color}\n      strokeWidth={4}\n      strokeDasharray=\"10,5\"\n    />\n  );\ncase \"배경음-2\":\n  return (\n    <line\n      x1={cx - 30}\n      y1={cy}\n      x2={cx + 30}\n      y2={cy}\n      stroke={color}\n      strokeWidth={4}\n    />\n  );\ncase \"배경음-3\":\n  return (\n    <path\n      d={`M${cx - 30},${cy} Q${cx - 20},${cy - 10} ${cx - 10},${cy} \n         T${cx + 10},${cy} T${cx + 30},${cy}`}\n      stroke={color}\n      strokeWidth={4}\n      fill=\"none\"\n    />\n  );\ncase \"배경음-4\":\n  return (\n    <path\n      d={`M ${cx - 30} ${cy} Q ${cx - 15} ${cy - 40}, ${cx} ${cy} T ${cx + 30} ${cy}`}\n      stroke={color}\n      strokeWidth={4}\n      fill=\"none\"\n    />\n  );\ncase \"배경음-5\":\n  return (\n    <polyline\n      points={`\n        ${cx - 30},${cy}\n        ${cx - 25},${cy - 20}\n        ${cx - 20},${cy + 10}\n        ${cx - 10},${cy - 15}\n        ${cx},${cy + 5}\n        ${cx + 10},${cy - 20}\n        ${cx + 20},${cy + 10}\n        ${cx + 30},${cy}\n      `}\n      stroke={color}\n      strokeWidth={4}\n      fill=\"none\"\n    />\n  );\n\n\n    // 강세\n    case \"강세-1\":\n      return <rect x={cx - 25} y={cy - 6} width={50} height={12} fill={color} rx={3} />;\n    case \"강세-2\":\n      return <polygon points={`${cx - 30},${cy} ${cx + 30},${cy - 20} ${cx + 30},${cy + 20}`} fill={color} />;\n    case \"강세-3\":\n      return <polygon points={`${cx + 30},${cy} ${cx - 30},${cy - 20} ${cx - 30},${cy + 20}`} fill={color} />;\n    case \"강세-4\":\n      return <line x1={cx - 30} y1={cy} x2={cx + 30} y2={cy} stroke={color} strokeWidth={6} strokeLinecap=\"round\" />;\n    case \"강세-5\":\n      return <line x1={cx} y1={cy - 20} x2={cx} y2={cy + 20} stroke={color} strokeWidth={6} strokeLinecap=\"round\" />;\n\n    default:\n      return <circle cx={cx} cy={cy} r={6} fill={color} />;\n  }\n};\n\n\n\n\nconst renderStarPreview = (cx, cy, color) => {\n  const h = 80;\n  const w = 3;\n  const lines = [];\n  for (let i = 0; i < 12; i++) {\n    const angle = (i * 30 * Math.PI) / 180;\n    const sin = Math.sin(angle);\n    const cos = Math.cos(angle);\n    const x1 = cx;\n    const y1 = cy;\n    const x2 = cx + sin * (h * 0.5);\n    const y2 = cy - cos * (h * 0.5);\n    lines.push(\n      <line\n        key={`line-${i}`}\n        x1={x1}\n        y1={y1}\n        x2={x2}\n        y2={y2}\n        stroke={color}\n        strokeWidth={w}\n      />\n    );\n  }\n  return <g>{lines}</g>;\n};\n\n\nconst SHAPES_BY_CATEGORY = {\n  박자: Array.from({ length: 9 }, (_, i) => `박자-${i + 1}`),\n  음계: Array.from({ length: 18 }, (_, i) => `음계-${i + 1}`),\n  배경음: Array.from({ length: 5 }, (_, i) => `배경음-${i + 1}`),\n  강세: Array.from({ length: 5 }, (_, i) => `강세-${i + 1}`),\n};\n\nconst CATEGORIES = [\"박자\", \"음계\", \"배경음\", \"강세\"];\nconst PITCH_ORDER = [\"C\", \"D\", \"E\", \"F\", \"G\", \"A\", \"B\", \"C'\"];\nconst NUM_PITCH_LINES = 8;\nconst LINE_SPACING = 40;\nconst SNAP_THRESHOLD = 8;\nconst PLAYBACK_DURATION = 15000;\n\nconst initialShape = (xPercent, yPercent, type = \"박자-1\", size = 40) => ({\n  id: uuidv4(),\n  xPercent,\n  yPercent,\n  type,\n  size,\n  group: null,\n  pitch: \"C\",\n  lastPlayed: 0,\n  customColor: null,\n});\n\nconst rhythmSounds = {\n  \"#4284F3\": [\n    `${process.env.PUBLIC_URL}/sound/rhythm/blue/r1.mp3`,\n    `${process.env.PUBLIC_URL}/sound/rhythm/blue/r2.mp3`,\n    `${process.env.PUBLIC_URL}/sound/rhythm/blue/r3.mp3`,\n    `${process.env.PUBLIC_URL}/sound/rhythm/blue/r13.mp3`,\n    `${process.env.PUBLIC_URL}/sound/rhythm/blue/r15.mp3`,\n  ],\n  \"#6EC1A1\": [\n    `${process.env.PUBLIC_URL}/sound/rhythm/green/r4.mp3`,\n    `${process.env.PUBLIC_URL}/sound/rhythm/green/r21.mp3`,\n    `${process.env.PUBLIC_URL}/sound/rhythm/green/r22.mp3`,\n    `${process.env.PUBLIC_URL}/sound/rhythm/green/r23.mp3`,\n    `${process.env.PUBLIC_URL}/sound/rhythm/green/r24.mp3`,\n    `${process.env.PUBLIC_URL}/sound/rhythm/green/r25.mp3`,\n  ],\n  \"#F5BC62\": [\n    `${process.env.PUBLIC_URL}/sound/rhythm/yellow/r5.mp3`,\n    `${process.env.PUBLIC_URL}/sound/rhythm/yellow/r6.mp3`,\n    `${process.env.PUBLIC_URL}/sound/rhythm/yellow/r14.mp3`,\n    `${process.env.PUBLIC_URL}/sound/rhythm/yellow/r19.mp3`,\n    `${process.env.PUBLIC_URL}/sound/rhythm/yellow/r20.mp3`,\n  ],\n  \"#FE6E3D\": [\n    `${process.env.PUBLIC_URL}/sound/rhythm/orange/r7.mp3`,\n    `${process.env.PUBLIC_URL}/sound/rhythm/orange/r8_01.mp3`,\n    `${process.env.PUBLIC_URL}/sound/rhythm/orange/r8.mp3`,\n    `${process.env.PUBLIC_URL}/sound/rhythm/orange/r9.mp3`,\n    `${process.env.PUBLIC_URL}/sound/rhythm/orange/r10.mp3`,\n    `${process.env.PUBLIC_URL}/sound/rhythm/orange/r11.mp3`,\n    `${process.env.PUBLIC_URL}/sound/rhythm/orange/r18.mp3`,\n  ],\n  \"#EF7A88\": [\n    `${process.env.PUBLIC_URL}/sound/rhythm/pink/r16.mp3`,\n    `${process.env.PUBLIC_URL}/sound/rhythm/pink/r17.mp3`,\n  ],\n};\n\n\nconst durationSounds = {\n  \"#4284F3\": [\n    `${process.env.PUBLIC_URL}/sound/duration/blue/d5_01.mp3`,\n    `${process.env.PUBLIC_URL}/sound/duration/blue/d11_01.mp3`,\n    `${process.env.PUBLIC_URL}/sound/duration/blue/d16_01.mp3`,\n    `${process.env.PUBLIC_URL}/sound/duration/blue/d17_01.mp3`,\n    `${process.env.PUBLIC_URL}/sound/duration/blue/d18_01.mp3`,\n    `${process.env.PUBLIC_URL}/sound/duration/blue/d20_01.mp3`,\n  ],\n  \"#6EC1A1\": [\n    `${process.env.PUBLIC_URL}/sound/duration/green/d1_01.mp3`,\n    `${process.env.PUBLIC_URL}/sound/duration/green/d6_01.mp3`,\n    `${process.env.PUBLIC_URL}/sound/duration/green/d11_01.mp3`,\n    `${process.env.PUBLIC_URL}/sound/duration/green/d12_01.mp3`,\n    `${process.env.PUBLIC_URL}/sound/duration/green/d13_01.mp3`,\n    `${process.env.PUBLIC_URL}/sound/duration/green/d25_01.mp3`,\n    `${process.env.PUBLIC_URL}/sound/duration/green/d26_01.mp3`,\n  ],\n  \"#FE6E3D\": [\n    `${process.env.PUBLIC_URL}/sound/duration/orange/d4_01.mp3`,\n    `${process.env.PUBLIC_URL}/sound/duration/orange/d7_01.mp3`,\n    `${process.env.PUBLIC_URL}/sound/duration/orange/d8_01.mp3`,\n    `${process.env.PUBLIC_URL}/sound/duration/orange/d9_01.mp3`,\n    `${process.env.PUBLIC_URL}/sound/duration/orange/d21_01.mp3`,\n    `${process.env.PUBLIC_URL}/sound/duration/orange/d22_01.mp3`,\n  ],\n  \"#EF7A88\": [\n    `${process.env.PUBLIC_URL}/sound/duration/pink/d24_01.mp3`,\n  ],\n  \"#F5BC62\": [\n    `${process.env.PUBLIC_URL}/sound/duration/yellow/d2_01.mp3`,\n    `${process.env.PUBLIC_URL}/sound/duration/yellow/d3_01.mp3`,\n    `${process.env.PUBLIC_URL}/sound/duration/yellow/d10_01.mp3`,\n    `${process.env.PUBLIC_URL}/sound/duration/yellow/d14_01.mp3`,\n    `${process.env.PUBLIC_URL}/sound/duration/yellow/d15_01.mp3`,\n    `${process.env.PUBLIC_URL}/sound/duration/yellow/d19_01.mp3`,\n  ],\n};\n\n\nconst pitchGroups = {\n  \"#4284F3\": [\"p1\", \"p11\", \"p18\", \"p19\"],\n  \"#6EC1A1\": [\"p13\", \"p16\", \"p22\", \"p29\", \"p30\"],\n  \"#FE6E3D\": [\"p3\"],\n  \"#EF7A88\": [\"p4\", \"p6\", \"p24\", \"p25\", \"p26\"],\n  \"#F5BC62\": [\"p2\", \"p5\", \"p7\", \"p8\", \"p9\", \"p12\", \"p15\", \"p23\"],\n};\n\nconst getPitchFromY = (y, svgHeight) => {\n  const centerY = svgHeight / 2;\n  const index = Math.round((y - centerY) / LINE_SPACING + NUM_PITCH_LINES / 2);\n  return PITCH_ORDER[Math.min(Math.max(index, 0), 7)];\n};\n\nconst getClosestLeadY = (y, svgHeight) => {\n  const centerY = svgHeight / 2;\n  const leadYs = Array.from({ length: NUM_PITCH_LINES }, (_, i) => centerY + (i - 3.5) * LINE_SPACING);\n  let closest = y;\n  let minDiff = SNAP_THRESHOLD;\n  for (let ly of leadYs) {\n    const diff = Math.abs(y - ly);\n    if (diff < minDiff) {\n      closest = ly;\n      minDiff = diff;\n    }\n  }\n  return closest;\n};\n\n// 🟧 Matter.js starParts 기반 도형 SVG로 구현\nconst renderStarShapeFromMatter = (cx, cy, color = \"black\", isSelected) => {\n  const elements = [];\n  const w = 4;\n  const h = 210;\n  const strokeWidth = isSelected ? 5 : 3;\n\n  for (let i = 0; i < 12; i++) {\n    const angle = (i * 30 * Math.PI) / 180;\n    const sin = Math.sin(angle);\n    const cos = Math.cos(angle);\n\n    const x1 = cx;\n    const y1 = cy;\n    const x2 = cx + sin * (h * 0.5);\n    const y2 = cy - cos * (h * 0.5);\n    elements.push(\n      <line key={`line-${i}`} x1={x1} y1={y1} x2={x2} y2={y2} stroke={color} strokeWidth={strokeWidth} />\n    );\n\n    elements.push(<circle key={`circle-a-${i}`} cx={x2} cy={y2} r={w / 2.8} fill={color} />);\n    elements.push(<circle key={`circle-b-${i}`} cx={cx - sin * (h * 0.5)} cy={cy + cos * (h * 0.5)} r={w / 2.8} fill={color} />);\n  }\n\n  return <g>{elements}</g>;\n};\n\nconst renderHollowStarShape = (cx, cy, color = \"black\", isSelected) => {\n  const elements = [];\n  const h = 140;\n  const strokeWidth = isSelected ? 5 : 3;\n\n  for (let i = 0; i < 12; i++) {\n    const angle = (i * 30 * Math.PI) / 180;\n    const sin = Math.sin(angle);\n    const cos = Math.cos(angle);\n\n    const x1 = cx + sin * 40; // 중심에서 약간 떨어진 시작점\n    const y1 = cy - cos * 40;\n    const x2 = cx + sin * (h * 0.5);\n    const y2 = cy - cos * (h * 0.5);\n\n    elements.push(\n      <line\n        key={`hollow-line-${i}`}\n        x1={x1}\n        y1={y1}\n        x2={x2}\n        y2={y2}\n        stroke={color}\n        strokeWidth={strokeWidth}\n        strokeLinecap=\"round\"\n      />\n    );\n  }\n\n  return <g>{elements}</g>;\n};\n\nconst renderCompactStarShape = (\n  cx,\n  cy,\n  color = \"black\",\n  isSelected,\n  shapeId,\n  setSelectedId,\n  setDraggingId\n) => {\n  const elements = [];\n  const h = 110; // ✅ 박자-2보다 더 작음\n  const strokeWidth = isSelected ? 5 : 3;\n\n  for (let i = 0; i < 12; i++) {\n    const angle = (i * 30 * Math.PI) / 180;\n    const sin = Math.sin(angle);\n    const cos = Math.cos(angle);\n\n    const x1 = cx + sin * 45; // ✅ 중심에서 더 멀리 떨어진 시작점\n    const y1 = cy - cos * 45;\n    const x2 = cx + sin * (h * 0.5);\n    const y2 = cy - cos * (h * 0.5);\n\n    elements.push(\n      <line\n        key={`compact-line-${i}`}\n        x1={x1}\n        y1={y1}\n        x2={x2}\n        y2={y2}\n        stroke={color}\n        strokeWidth={strokeWidth}\n        strokeLinecap=\"round\"\n      />\n    );\n  }\n\n  return <g>{elements}</g>;\n};\n\nconst renderDonutShape = (cx, cy, color = \"black\", isSelected) => {\n  const outerRadius = 90;\n  const innerRadius = 75;\n\n  return (\n    <g>\n      <circle\n        cx={cx}\n        cy={cy}\n        r={outerRadius}\n        fill={color}\n        stroke={isSelected ? \"black\" : \"none\"}\n        strokeWidth={2}\n      />\n      <circle\n        cx={cx}\n        cy={cy}\n        r={innerRadius}\n        fill=\"#F7F2EA\"\n      />\n    </g>\n  );\n};\n\nconst renderSmallDonutShape = (cx, cy, color = \"black\", isSelected) => {\n  const outerRadius = 55;\n  const innerRadius = 42;\n\n  return (\n    <g>\n      <circle\n        cx={cx}\n        cy={cy}\n        r={outerRadius}\n        fill={color}\n        stroke={isSelected ? \"black\" : \"none\"}\n        strokeWidth={2}\n      />\n      <circle\n        cx={cx}\n        cy={cy}\n        r={innerRadius}\n        fill=\"#F7F2EA\"\n      />\n    </g>\n  );\n};\n\nconst renderSmallFilledCircle = (cx, cy, color = \"black\", isSelected) => {\n  const radius = 28; // 박자-5보다 작음\n\n  return (\n    <circle\n      cx={cx}\n      cy={cy}\n      r={radius}\n      fill={color}\n      stroke={isSelected ? \"black\" : \"none\"}\n      strokeWidth={2}\n    />\n  );\n};\n\nconst renderFatStarShape = (cx, cy, color = \"black\", isSelected) => {\n  const elements = [];\n  const w = 8; // 선 끝 원 반지름\n  const h = 190;\n  const strokeWidth = isSelected ? 22 : 20; // 선 자체가 굵음\n\n  for (let i = 0; i < 12; i++) {\n    const angle = (i * 30 * Math.PI) / 180;\n    const sin = Math.sin(angle);\n    const cos = Math.cos(angle);\n\n    const x1 = cx;\n    const y1 = cy;\n    const x2 = cx + sin * (h * 0.5);\n    const y2 = cy - cos * (h * 0.5);\n\n    elements.push(\n      <line\n        key={`fat-line-${i}`}\n        x1={x1}\n        y1={y1}\n        x2={x2}\n        y2={y2}\n        stroke={color}\n        strokeWidth={strokeWidth}\n        strokeLinecap=\"round\"\n      />\n    );\n\n    elements.push(<circle key={`fat-circle-a-${i}`} cx={x2} cy={y2} r={w} fill={color} />);\n    elements.push(<circle key={`fat-circle-b-${i}`} cx={cx - sin * (h * 0.5)} cy={cy + cos * (h * 0.5)} r={w} fill={color} />);\n  }\n\n  return <g>{elements}</g>;\n};\n\nconst renderHollowFatStarShape = (cx, cy, color = \"black\", isSelected) => {\n  const elements = [];\n  const h = 30; // 🔸 박자-7보다 짧음\n  const strokeWidth = isSelected ? 22 : 20;\n  const radius = 8; // 선 끝 원 크기\n\n  for (let i = 0; i < 12; i++) {\n    const angle = (i * 30 * Math.PI) / 180;\n    const sin = Math.sin(angle);\n    const cos = Math.cos(angle);\n\n    const innerDist = 30; // 🔸 중심으로부터 떨어진 선 시작점\n    const outerDist = innerDist + h;\n\n    const x1 = cx + sin * innerDist;\n    const y1 = cy - cos * innerDist;\n    const x2 = cx + sin * outerDist;\n    const y2 = cy - cos * outerDist;\n\n    // 굵은 선\n    elements.push(\n      <line\n        key={`hollow-fat-line-${i}`}\n        x1={x1}\n        y1={y1}\n        x2={x2}\n        y2={y2}\n        stroke={color}\n        strokeWidth={strokeWidth}\n        strokeLinecap=\"round\"\n      />\n    );\n\n    // 선 끝에 원\n    elements.push(\n      <circle key={`hollow-fat-circle-${i}`} cx={x2} cy={y2} r={radius} fill={color} />\n    );\n  }\n\n  return <g>{elements}</g>;\n};\n\nconst renderMiniFatStarShape = (cx, cy, color = \"black\", isSelected) => {\n  const elements = [];\n  const h = 15;  // 🔸 선 길이: 박자-8보다 짧음\n  const innerDist = 20; // 🔸 중심으로부터 떨어진 거리: 더 가까움\n  const strokeWidth = isSelected ? 22 : 20;\n  const radius = 8; // 🔸 끝 원 크기: 작게\n\n  for (let i = 0; i < 12; i++) {\n    const angle = (i * 30 * Math.PI) / 180;\n    const sin = Math.sin(angle);\n    const cos = Math.cos(angle);\n\n    const outerDist = innerDist + h;\n\n    const x1 = cx + sin * innerDist;\n    const y1 = cy - cos * innerDist;\n    const x2 = cx + sin * outerDist;\n    const y2 = cy - cos * outerDist;\n\n    // 굵은 짧은 선\n    elements.push(\n      <line\n        key={`mini-fat-line-${i}`}\n        x1={x1}\n        y1={y1}\n        x2={x2}\n        y2={y2}\n        stroke={color}\n        strokeWidth={strokeWidth}\n        strokeLinecap=\"round\"\n      />\n    );\n\n    // 끝에 작은 원\n    elements.push(\n      <circle key={`mini-fat-circle-${i}`} cx={x2} cy={y2} r={radius} fill={color} />\n    );\n  }\n\n  return <g>{elements}</g>;\n};\n\nconst renderTriangleShape = (cx, cy, color = \"black\", isSelected) => {\n  const size = 45; // 삼각형 한 변 길이\n  const height = size * Math.sqrt(3) / 2;\n\n  const points = [\n    `${cx},${cy - height / 2}`, // top\n    `${cx - size / 2},${cy + height / 2}`, // bottom left\n    `${cx + size / 2},${cy + height / 2}` // bottom right\n  ].join(\" \");\n\n  return (\n    <polygon\n      points={points}\n      fill={color}\n      stroke={isSelected ? \"black\" : \"none\"}\n      strokeWidth=\"2\"\n    />\n  );\n};\n\nconst renderSquareShape = (cx, cy, color = \"black\", isSelected) => {\n  const size = 40;\n  const x = cx - size / 2;\n  const y = cy - size / 2;\n\n  return (\n    <rect\n      x={x}\n      y={y}\n      width={size}\n      height={size}\n      fill={color}\n      stroke={isSelected ? \"black\" : \"none\"}\n      strokeWidth=\"2\"\n    />\n  );\n};\n\nconst renderCircleShape = (cx, cy, color = \"black\", isSelected) => {\n  const radius = 20; // 지름 40 → 사각형과 시각적 일치\n\n  return (\n    <circle\n      cx={cx}\n      cy={cy}\n      r={radius}\n      fill={color}\n      stroke={isSelected ? \"black\" : \"none\"}\n      strokeWidth=\"2\"\n    />\n  );\n};\n\nconst renderSmallSquareShape = (cx, cy, color = \"black\", isSelected) => {\n  const size = 20;\n  const x = cx - size / 2;\n  const y = cy - size / 2;\n\n  return (\n    <rect\n      x={x}\n      y={y}\n      width={size}\n      height={size}\n      fill={color}\n      stroke={isSelected ? \"black\" : \"none\"}\n      strokeWidth=\"2\"\n    />\n  );\n};\n\nconst renderWideRectangleShape = (cx, cy, color = \"black\", isSelected) => {\n  const width = 65;\n  const height = 40;\n  const x = cx - width / 2;\n  const y = cy - height / 2;\n\n  return (\n    <rect\n      x={x}\n      y={y}\n      width={width}\n      height={height}\n      fill={color}\n      stroke={isSelected ? \"black\" : \"none\"}\n      strokeWidth=\"2\"\n    />\n  );\n};\n\nconst renderHalfCircleShape = (cx, cy, color = \"black\", isSelected) => {\n  const radius = 40;\n  const d = `\n    M ${cx - radius}, ${cy}\n    A ${radius},${radius} 0 0,1 ${cx + radius},${cy}\n    L ${cx + radius}, ${cy + 1}\n    L ${cx - radius}, ${cy + 1}\n    Z\n  `;\n\n  return (\n    <path\n      d={d}\n      fill={color}\n      stroke={isSelected ? \"black\" : \"none\"}\n      strokeWidth=\"2\"\n    />\n  );\n};\n\nconst renderWideIsoscelesTriangle = (cx, cy, color = \"black\", isSelected) => {\n  const width = 40;\n  const height = 25;\n\n  const points = [\n    `${cx},${cy - height / 2}`,                // top\n    `${cx - width / 2},${cy + height / 2}`,    // bottom left\n    `${cx + width / 2},${cy + height / 2}`     // bottom right\n  ].join(\" \");\n\n  return (\n    <polygon\n      points={points}\n      fill={color}\n      stroke={isSelected ? \"black\" : \"none\"}\n      strokeWidth=\"2\"\n      transform={`rotate(90, ${cx}, ${cy})`} // 👉 오른쪽 90도 회전\n    />\n  );\n};\n\nconst renderDiamondSquareShape = (cx, cy, color = \"black\", isSelected) => {\n  const size = 40;\n  const x = cx - size / 2;\n  const y = cy - size / 2;\n\n  return (\n    <rect\n      x={x}\n      y={y}\n      width={size}\n      height={size}\n      fill={color}\n      stroke={isSelected ? \"black\" : \"none\"}\n      strokeWidth=\"2\"\n      transform={`rotate(45, ${cx}, ${cy})`} // 💎 중심 기준 45도 회전\n    />\n  );\n};\n\nconst renderSmallCircleShape = (cx, cy, color = \"black\", isSelected) => {\n  const radius = 12;\n\n  return (\n    <circle\n      cx={cx}\n      cy={cy}\n      r={radius}\n      fill={color}\n      stroke={isSelected ? \"black\" : \"none\"}\n      strokeWidth=\"2\"\n    />\n  );\n};\n\nconst renderWavySvgDonutShape = (cx, cy, color = \"black\", isSelected) => {\n  const scale = 0.7; // 사이즈 조절 (필요에 따라)\n  const translateX = cx - 50; // 100 / 2\n  const translateY = cy - 51; // 102 / 2\n\n  return (\n    <g\n      transform={`translate(${translateX}, ${translateY}) scale(${scale})`}\n    >\n      <path\n        d=\"M17.833 19.091C22.1743 2.46616 41.4315 -5.13429 55.9569 4.04414C60.4447 6.87988 65.7085 8.23744 71.0079 7.92586C88.1606 6.91739 101.34 22.8833 97.0993 39.5341C95.7891 44.6785 96.1246 50.1042 98.0585 55.048C104.318 71.0496 93.2062 88.5175 76.06 89.6299C70.7625 89.9735 65.706 91.9692 61.6018 95.3362C48.3178 106.234 28.271 101.064 21.9146 85.1007C19.9507 80.1687 16.4902 75.9764 12.0197 73.1136C-2.4499 63.8473 -3.72758 43.1841 9.49024 32.2058C13.574 28.814 16.4917 24.2274 17.833 19.091Z\"\n        fill={color}\n        stroke={isSelected ? \"black\" : \"none\"}\n        strokeWidth=\"2\"\n      />\n      <circle\n        cx=\"50\"\n        cy=\"51\"\n        r=\"18\"\n        fill=\"#F7F2EA\"\n      />\n    </g>\n  );\n};\n\nconst renderFourPointStarShape = (cx, cy, color = \"black\", isSelected) => {\n  const size = 30; // 전체 크기 조절용\n\n  const points = [\n    `${cx},${cy - size}`,           // top\n    `${cx + size * 0.4},${cy - size * 0.4}`,\n    `${cx + size},${cy}`,\n    `${cx + size * 0.4},${cy + size * 0.4}`,\n    `${cx},${cy + size}`,\n    `${cx - size * 0.4},${cy + size * 0.4}`,\n    `${cx - size},${cy}`,\n    `${cx - size * 0.4},${cy - size * 0.4}`\n  ].join(\" \");\n\n  return (\n    <polygon\n      points={points}\n      fill={color}\n      stroke={isSelected ? \"black\" : \"none\"}\n      strokeWidth=\"2\"\n    />\n  );\n};\n\nconst renderAsteriskShape = (cx, cy, color = \"black\", isSelected) => {\n  const h = 20; // 선 길이\n  const strokeWidth = isSelected ? 20 : 18;\n  const radius = 8; // 끝 원 크기\n  const lineCount = 5;\n  const elements = [];\n\n  for (let i = 0; i < lineCount; i++) {\n    const angle = (i * 360 / lineCount) * (Math.PI / 180);\n    const sin = Math.sin(angle);\n    const cos = Math.cos(angle);\n\n    const x1 = cx;\n    const y1 = cy;\n    const x2 = cx + sin * h;\n    const y2 = cy - cos * h;\n\n    elements.push(\n      <line\n        key={`line-${i}`}\n        x1={x1}\n        y1={y1}\n        x2={x2}\n        y2={y2}\n        stroke={color}\n        strokeWidth={strokeWidth}\n        strokeLinecap=\"round\"\n      />\n    );\n\n    elements.push(\n      <circle\n        key={`cap-${i}`}\n        cx={x2}\n        cy={y2}\n        r={radius}\n        fill={color}\n      />\n    );\n  }\n\n  return <g>{elements}</g>;\n};\n\nconst renderPointyDonutShape = (cx, cy, color = \"black\", isSelected) => {\n  const scale = 0.7; // SVG 원본이 크므로 크기 조절\n  const translateX = cx - 52.5; // 105 / 2\n  const translateY = cy - 54;   // 108 / 2\n\n  return (\n    <g transform={`translate(${translateX}, ${translateY}) scale(${scale})`}>\n      <path\n        d=\"M31.7149 4.588C33.2855 1.18983 37.249 -0.374528 40.7171 1.03499L65.852 11.2505C66.4314 11.486 67.0397 11.6429 67.6607 11.717L94.601 14.9319C98.3182 15.3755 101.031 18.6617 100.762 22.3956L98.8136 49.457C98.7687 50.0808 98.8074 50.7078 98.9288 51.3213L104.196 77.9366C104.923 81.6089 102.636 85.2043 99.0018 86.1024L72.6627 92.6118C72.0555 92.7619 71.4712 92.9925 70.9253 93.2975L47.2403 106.532C43.9723 108.358 39.8462 107.294 37.869 104.115L23.539 81.0764C23.2087 80.5453 22.8088 80.0609 22.3499 79.6359L2.44438 61.1998C-0.30214 58.656 -0.565117 54.403 1.8471 51.5403L19.3298 30.7923C19.7327 30.3141 20.0699 29.7841 20.3323 29.2164L31.7149 4.588Z\"\n        fill={color}\n        stroke={isSelected ? \"black\" : \"none\"}\n        strokeWidth=\"2\"\n      />\n      <circle cx=\"52.5\" cy=\"54\" r=\"16\" fill=\"#F7F2EA\" />\n    </g>\n  );\n};\n\nconst renderEightPointStarShape = (cx, cy, color = \"black\", isSelected) => {\n  const outerRadius = 40;\n  const innerRadius = 20;\n  const points = [];\n\n  for (let i = 0; i < 16; i++) {\n    const angle = (i * Math.PI) / 8; // 22.5도 간격 (360 / 16)\n    const radius = i % 2 === 0 ? outerRadius : innerRadius;\n    const x = cx + Math.cos(angle) * radius;\n    const y = cy + Math.sin(angle) * radius;\n    points.push(`${x},${y}`);\n  }\n\n  return (\n    <polygon\n      points={points.join(\" \")}\n      fill={color}\n      stroke={isSelected ? \"black\" : \"none\"}\n      strokeWidth=\"2\"\n    />\n  );\n};\n\nconst renderSixArmAsteriskShape = (cx, cy, color = \"black\", isSelected) => {\n  const h = 20; // 선 길이\n  const strokeWidth = isSelected ? 20 : 18;\n  const radius = 8; // 선 끝 원 크기\n  const lineCount = 6;\n\n  const elements = [];\n\n  for (let i = 0; i < lineCount; i++) {\n    const angle = (i * 360 / lineCount) * (Math.PI / 180);\n    const sin = Math.sin(angle);\n    const cos = Math.cos(angle);\n\n    const x1 = cx;\n    const y1 = cy;\n    const x2 = cx + sin * h;\n    const y2 = cy - cos * h;\n\n    elements.push(\n      <line\n        key={`line-${i}`}\n        x1={x1}\n        y1={y1}\n        x2={x2}\n        y2={y2}\n        stroke={color}\n        strokeWidth={strokeWidth}\n        strokeLinecap=\"round\"\n      />\n    );\n\n    elements.push(\n      <circle\n        key={`cap-${i}`}\n        cx={x2}\n        cy={y2}\n        r={radius}\n        fill={color}\n      />\n    );\n  }\n\n  return <g>{elements}</g>;\n};\n\nconst renderGearDonutShape = (cx, cy, color = \"black\", isSelected) => {\n  const baseRadius = 20;       // 중심으로부터 돌기 배치 위치\n  const rippleRadius = 10;     // 돌기 크기\n  const rippleCount = 12;      // 꼭짓점 개수\n  const holeRadius = 15;       // 가운데 비어있는 원 크기\n\n  const elements = [];\n\n  // 외곽 돌기\n  for (let i = 0; i < rippleCount; i++) {\n    const angle = (i * 360 / rippleCount) * (Math.PI / 180);\n    const x = cx + Math.cos(angle) * baseRadius;\n    const y = cy + Math.sin(angle) * baseRadius;\n\n    elements.push(\n      <circle\n        key={`ripple-${i}`}\n        cx={x}\n        cy={y}\n        r={rippleRadius}\n        fill={color}\n      />\n    );\n  }\n\n  // 중앙 구멍\n  elements.push(\n    <circle\n      key=\"hole\"\n      cx={cx}\n      cy={cy}\n      r={holeRadius}\n      fill=\"#F7F2EA\"\n    />\n  );\n\n  // 선택 표시 테두리\n  if (isSelected) {\n    elements.push(\n      <circle\n        key=\"outline\"\n        cx={cx}\n        cy={cy}\n        r={baseRadius + rippleRadius - 2}\n        fill=\"none\"\n        stroke=\"black\"\n        strokeWidth=\"2\"\n      />\n    );\n  }\n\n  return <g>{elements}</g>;\n};\n\nconst renderBroadEightPointStar = (cx, cy, color = \"black\", isSelected) => {\n  const outerRadius = 42; // 더 넓게\n  const innerRadius = 30; // 깊이 차이 줄임 → 면적 넓어짐\n  const points = [];\n\n  for (let i = 0; i < 16; i++) {\n    const angle = (i * Math.PI) / 8;\n    const r = i % 2 === 0 ? outerRadius : innerRadius;\n    const x = cx + Math.cos(angle) * r;\n    const y = cy + Math.sin(angle) * r;\n    points.push(`${x},${y}`);\n  }\n\n  return (\n    <polygon\n      points={points.join(\" \")}\n      fill={color}\n      stroke={isSelected ? \"black\" : \"none\"}\n      strokeWidth=\"2\"\n    />\n  );\n};\n\nconst renderBarAsteriskShape = (cx, cy, color = \"black\", isSelected) => {\n  const barLength = 40;\n  const barWidth = 18;\n  const armCount = 8; // ✅ 8방향으로 수정\n  const elements = [];\n\n  for (let i = 0; i < armCount; i++) {\n    const angle = (i * 360 / armCount);\n\n    const x = cx - barWidth / 2;\n    const y = cy - barLength;\n    \n    elements.push(\n      <rect\n        key={`bar-${i}`}\n        x={x}\n        y={y}\n        width={barWidth}\n        height={barLength}\n        fill={color}\n        transform={`rotate(${angle}, ${cx}, ${cy})`}\n      />\n    );\n  }\n\n  // 선택 표시용 외곽\n  if (isSelected) {\n    elements.push(\n      <circle\n        key=\"outline\"\n        cx={cx}\n        cy={cy}\n        r={barLength}\n        fill=\"none\"\n        stroke=\"black\"\n        strokeWidth=\"2\"\n      />\n    );\n  }\n\n  return <g>{elements}</g>;\n};\n\nconst renderWavyLineShape = (y, svgWidth, color, isSelected, shape, setDraggingId, setSelectedId) => {\n  const amplitude = 10; // 파형 높이\n  const frequency = 0.04; // 파형 밀도\n  const step = 5; // 선 해상도\n\n  let d = `M 0 ${y}`;\n  for (let x = step; x <= svgWidth; x += step) {\n    const waveY = y + Math.sin(x * frequency) * amplitude;\n    d += ` L ${x} ${waveY}`;\n  }\n\n  return (\n    <path\n      key={shape.id}\n      d={d}\n      stroke={color}\n      strokeWidth={isSelected ? 8 : 6}\n      fill=\"none\"\n      onMouseDown={(e) => {\n        e.stopPropagation();\n        setDraggingId(shape.id);\n      }}\n      onClick={(e) => {\n        e.stopPropagation();\n        setSelectedId(shape.id);\n      }}\n    />\n  );\n};\n\nconst renderCurvedEmotionLine = (y, svgWidth, color, isSelected, shape, setDraggingId, setSelectedId) => {\n  // 원본 path는 viewBox 높이가 61이므로, y값을 기준으로 수직 위치 보정\n  const translateY = y - 145.5; // 61 / 2\n\n  return (\n    <g\n      key={shape.id}\n      transform={`translate(0, ${translateY}) scale(${svgWidth / 497}, 2.5)`} // 497 → 원본 너비\n    >\n      <path\n        d=\"M2 57.6559C2 57.6559 302 60.1941 316 57.6559C330 55.1177 359.27 52.9558 360.5 33.1559C361.678 14.1917 341.953 0.808148 323 2.15587C305.504 3.39998 290.266 15.6175 290.5 33.1559C290.783 54.3739 324.5 57.6559 339 57.6559C353.5 57.6559 495.5 57.6559 495.5 57.6559\"\n        stroke={color}\n        strokeWidth={isSelected ? 4 : 2.5}\n        fill=\"none\"\n        onMouseDown={(e) => {\n          e.stopPropagation();\n          setDraggingId(shape.id);\n        }}\n        onClick={(e) => {\n          e.stopPropagation();\n          setSelectedId(shape.id);\n        }}\n      />\n    </g>\n  );\n};\n\nconst renderSharpBeatLine = (y, svgWidth, color, isSelected, shape, setDraggingId, setSelectedId) => {\n  const originalWidth = 498;\n  const lineYinSvg = 108; // SVG 안에서 기준선 위치\n  const scale = svgWidth / originalWidth;\n  const translateY = y - lineYinSvg;\n\n  return (\n    <g\n      key={shape.id}\n      transform={`translate(0, ${translateY}) scale(${scale})`}\n    >\n      <path\n        d=\"M2 38.5H22.8423C23.2415 38.5 23.6024 38.2626 23.7605 37.8961L32.5818 17.4468C33.012 16.4495 34.5 16.7567 34.5 17.8429V37.5C34.5 38.0523 34.9477 38.5 35.5 38.5H68.5H121.71C121.899 38.5 122.085 38.4461 122.245 38.3445L141.729 25.9891C142.166 25.7121 142.741 25.8139 143.057 26.2239L151.438 37.1198C151.909 37.7316 152.866 37.6022 153.157 36.8874L167.074 2.72768C167.488 1.7113 169 2.00749 169 3.10498V53.9332C169 54.9009 170.237 55.3043 170.808 54.5227L182.2 38.9105C182.389 38.6525 182.689 38.5 183.008 38.5H211.761C211.918 38.5 212.073 38.4629 212.213 38.3918L245.048 21.7367C245.713 21.3993 246.5 21.8826 246.5 22.6285V50.5858C246.5 51.4767 247.577 51.9229 248.207 51.2929L260.707 38.7929C260.895 38.6054 261.149 38.5 261.414 38.5H278.5C279.052 38.5 279.5 38.0523 279.5 37.5V15.6545C279.5 14.484 281.166 14.2664 281.466 15.3976L289.522 45.7021C289.727 46.4724 290.706 46.7053 291.236 46.1096L297.702 38.8356C297.891 38.6221 298.163 38.5 298.449 38.5H385.382C385.761 38.5 386.107 38.286 386.276 37.9472L392.181 26.1386C392.608 25.2837 393.877 25.4583 394.057 26.397L398.11 47.4732C398.268 48.2937 399.303 48.5703 399.849 47.9379L407.701 38.8464C407.891 38.6264 408.167 38.5 408.458 38.5H496.5\"\n        stroke={color}\n        strokeWidth={isSelected ? 4 : 2}\n        strokeLinecap=\"round\"\n        fill=\"none\"\n        onMouseDown={(e) => {\n          e.stopPropagation();\n          setDraggingId(shape.id);\n        }}\n        onClick={(e) => {\n          e.stopPropagation();\n          setSelectedId(shape.id);\n        }}\n      />\n    </g>\n  );\n};\n\nconst renderAccentBar = (y, svgWidth, isSelected, shape, setDraggingId, setSelectedId) => {\n  const barHeight = isSelected ? 12 : 10;\n  const offset = 200; // 👈 여기 값 조정\n  const color = \"#222\";\n\n  return (\n    <rect\n      key={shape.id}\n      x={0}\n      y={y - barHeight / 2 + offset}\n      width={svgWidth}\n      height={barHeight}\n      fill={color}\n      stroke={isSelected ? \"black\" : \"none\"}\n      strokeWidth={2}\n      onMouseDown={(e) => {\n        e.stopPropagation();\n        setDraggingId(shape.id);\n      }}\n      onClick={(e) => {\n        e.stopPropagation();\n        setSelectedId(shape.id);\n      }}\n    />\n  );\n};\n\nconst renderDecreasingVolumeAccent = (y, svgWidth, isSelected, shape, setDraggingId, setSelectedId) => {\n  const height = 30;\n  const offset = 200; // 원하는 만큼 내려주기\n  const adjustedY = y + offset;\n\n  const topY = adjustedY - height / 2;\n  const bottomY = adjustedY + height / 2;\n\n  const points = [\n    `0,${topY}`,\n    `${svgWidth},${topY + 15}`,\n    `${svgWidth},${bottomY - 15}`,\n    `0,${bottomY}`\n  ].join(\" \");\n\n  return (\n    <polygon\n      key={shape.id}\n      points={points}\n      fill=\"#333\"\n      stroke={isSelected ? \"black\" : \"none\"}\n      strokeWidth=\"2\"\n      onMouseDown={(e) => {\n        e.stopPropagation();\n        setDraggingId(shape.id);\n      }}\n      onClick={(e) => {\n        e.stopPropagation();\n        setSelectedId(shape.id);\n      }}\n    />\n  );\n};\n\nconst renderSwellingAccentBar = (y, svgWidth, isSelected, shape, setDraggingId, setSelectedId) => {\n  const height = 40;\n  const offset = 200;\n  const adjustedY = y + offset;\n\n  const topY = adjustedY - height / 2;\n  const bottomY = adjustedY + height / 2;\n\n  const controlOffset = svgWidth / 4; // 곡선 중앙을 향해 당기는 값\n\n  const pathData = `\n    M 0 ${topY}\n    C ${controlOffset} ${topY + 20}, ${svgWidth - controlOffset} ${topY + 20}, ${svgWidth} ${topY}\n    L ${svgWidth} ${bottomY}\n    C ${svgWidth - controlOffset} ${bottomY - 20}, ${controlOffset} ${bottomY - 20}, 0 ${bottomY}\n    Z\n  `;\n\n  return (\n    <path\n      key={shape.id}\n      d={pathData}\n      fill=\"#222\"\n      stroke={isSelected ? \"black\" : \"none\"}\n      strokeWidth=\"2\"\n      onMouseDown={(e) => {\n        e.stopPropagation();\n        setDraggingId(shape.id);\n      }}\n      onClick={(e) => {\n        e.stopPropagation();\n        setSelectedId(shape.id);\n      }}\n    />\n  );\n};\n\nconst renderGrowingAccentBar = (y, svgWidth, isSelected, shape, setDraggingId, setSelectedId) => {\n  const baseHeight = 1;    // 시작 두께\n  const maxHeight = 40;     // 끝에서의 최대 두께\n  const offset = 200;\n  const adjustedY = y + offset;\n\n  const topStart = adjustedY - baseHeight / 2;\n  const bottomStart = adjustedY + baseHeight / 2;\n\n  const topEnd = adjustedY - maxHeight / 2;\n  const bottomEnd = adjustedY + maxHeight / 2;\n\n  const controlX = svgWidth * 0.7;\n\n  const pathData = `\n    M 0 ${topStart}\n    Q ${controlX} ${topStart}, ${svgWidth} ${topEnd}\n    L ${svgWidth} ${bottomEnd}\n    Q ${controlX} ${bottomStart}, 0 ${bottomStart}\n    Z\n  `;\n\n  return (\n    <path\n      key={shape.id}\n      d={pathData}\n      fill=\"#222\"\n      stroke={isSelected ? \"black\" : \"none\"}\n      strokeWidth=\"2\"\n      onMouseDown={(e) => {\n        e.stopPropagation();\n        setDraggingId(shape.id);\n      }}\n      onClick={(e) => {\n        e.stopPropagation();\n        setSelectedId(shape.id);\n      }}\n    />\n  );\n};\n\nconst renderShrinkingAccentBar = (y, svgWidth, isSelected, shape, setDraggingId, setSelectedId) => {\n  const baseHeight = 40;   // 시작 두께 (왼쪽)\n  const minHeight = 1;    // 끝 두께 (오른쪽)\n  const offset = 200;\n  const adjustedY = y + offset;\n\n  const topStart = adjustedY - baseHeight / 2;\n  const bottomStart = adjustedY + baseHeight / 2;\n\n  const topEnd = adjustedY - minHeight / 2;\n  const bottomEnd = adjustedY + minHeight / 2;\n\n  const controlX = svgWidth * 0.3;\n\n  const pathData = `\n    M 0 ${topStart}\n    Q ${controlX} ${topStart}, ${svgWidth} ${topEnd}\n    L ${svgWidth} ${bottomEnd}\n    Q ${controlX} ${bottomStart}, 0 ${bottomStart}\n    Z\n  `;\n\n  return (\n    <path\n      key={shape.id}\n      d={pathData}\n      fill=\"#222\"\n      stroke={isSelected ? \"black\" : \"none\"}\n      strokeWidth=\"2\"\n      onMouseDown={(e) => {\n        e.stopPropagation();\n        setDraggingId(shape.id);\n      }}\n      onClick={(e) => {\n        e.stopPropagation();\n        setSelectedId(shape.id);\n      }}\n    />\n  );\n};\n\n\n\nconst SoundPatternBuilder = ({ presetShapes = null, readOnly = false, onPlaybackEnd, resetPlayback }) => {\n  const [shapes, setShapes] = useState([]);\n  const [selectedCategory, setSelectedCategory] = useState(null);\n  const [selectedShape, setSelectedShape] = useState(null);\n  const [selectedColor, setSelectedColor] = useState(null);\n  const [selectedId, setSelectedId] = useState(null);\n  const [draggingId, setDraggingId] = useState(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [isPaused, setIsPaused] = useState(false);\n  const [playheadX, setPlayheadX] = useState(0);\n  const [showPitchLines, setShowPitchLines] = useState(true);\n  const [showSaveModal, setShowSaveModal] = useState(false);\nconst [composerName, setComposerName] = useState(\"\");\nconst [shapePage, setShapePage] = useState(0);\nconst [palettePos, setPalettePos] = useState({ x: 0, y: 0 });\n\n\n\n\n\n  const svgRef = useRef(null);\n  const shapesRef = useRef(shapes);\n  const startTimeRef = useRef(null);\n  const pauseTimeRef = useRef(null);\n  const animationRef = useRef(null);\n  const activeAudios = useRef([]);\n  const colorPaletteRef = useRef(null); // 🔹 추가\n  const isPlayingRef = useRef(false);\nconst isPausedRef = useRef(false);\n\n  const currentShapes = SHAPES_BY_CATEGORY[selectedCategory] || [];\n  const shapesPerPage = 5;\n  const startIndex = shapePage * shapesPerPage;\n  const paginatedShapes = currentShapes.slice(startIndex, startIndex + shapesPerPage);\n\n\n  const handleExportShapes = () => {\n  const exportData = JSON.stringify(shapes, null, 2);\n  copy(exportData);\n  console.log(\"복사 완료! 콘솔에도 출력됨 👇\");\n  console.log(exportData);\n};\n\nuseEffect(() => {\n  if (presetShapes) {\n    setShapes(presetShapes.map(shape => ({ ...shape, id: uuidv4() })));\n  }\n}, [presetShapes]);\n\nuseEffect(() => {\n  isPlayingRef.current = isPlaying;\n}, [isPlaying]);\n\nuseEffect(() => {\n  isPausedRef.current = isPaused;\n}, [isPaused]);\n\n\n\n  \n\n// 🔼 컴포넌트 상단에 함수 정의 추가\nconst handleSaveToGallery = () => {\n  if (!svgRef.current) return;\n\n  toPng(svgRef.current, {\n    backgroundColor: \"#F7F2EA\",\n    cacheBust: true,\n    embedWebFonts: false, // 🔧 웹폰트 오류 방지\n  })\n    .then((dataUrl) => {\n      // 이제는 단순히 다운로드만 수행\n      download(dataUrl, \"my-score.png\");\n    })\n    .catch((err) => {\n      console.error(\"이미지 다운로드 실패:\", err);\n    });\n};\n\n\nuseEffect(() => {\n  if (!selectedId || !svgRef.current) return;\n\n  const svgRect = svgRef.current.getBoundingClientRect();\n  const shape = shapes.find(s => s.id === selectedId);\n  if (!shape) return;\n\n  const svgWidth = svgRect.width;\n  const svgHeight = svgRect.height;\n\n  const x = (shape.xPercent / 100) * svgWidth;\n  const y = (shape.yPercent / 100) * svgHeight;\n\n  // 도형의 크기를 고려해서 위쪽으로 이동\n  const offsetY = shape.size ? shape.size * 0.8 : 70; // 없으면 기본값 70\n\n  setPalettePos({ x: svgRect.left + x, y: svgRect.top + y - offsetY });\n}, [selectedId, shapes]);\n\n\n\n\n  useEffect(() => {\n    shapesRef.current = shapes;\n  }, [shapes]);\n\n  // 🔁 resetPlayback이 true일 때 재생 초기화\nuseEffect(() => {\n  if (resetPlayback) {\n    setPlayheadX(0);      // 플레이헤드 위치 초기화\n    setIsPlaying(false);  // 재생 중지\n  }\n}, [resetPlayback]);\n\n\n  useEffect(() => {\n    const handleKeyDown = (e) => {\n      if (readOnly) return; // 🔒 삭제 금지\n      if ((e.key === \"Delete\" || e.key === \"Backspace\") && selectedId) {\n        setShapes(prev => prev.filter(shape => shape.id !== selectedId));\n        setSelectedId(null);\n      }\n    };\n    window.addEventListener(\"keydown\", handleKeyDown);\n    return () => window.removeEventListener(\"keydown\", handleKeyDown);\n  }, [selectedId]);\n\n  const playSoundForShape = (shape, pitch, elapsed) => {\n    if (!shape || !shape.type) return;\n    if (elapsed - shape.lastPlayed < 300) return;\n    shape.lastPlayed = elapsed;\n\n    const color = shape.customColor;\n    let audio = null;\n\n    if (shape.type.startsWith(\"배경음\")) {\n  const files = durationSounds[color];\n  if (!files) return;\n\n  const audio = new Audio(files[Math.floor(Math.random() * files.length)]);\n  audio.volume = 0.5;\n\n  const svgWidth = svgRef.current?.clientWidth || 800;\n  const shapeX = (shape.xPercent / 100) * svgWidth;\n  const progressRatio = Math.max(0, Math.min(1, (playheadX - shapeX) / svgWidth));\n  audio.currentTime = PLAYBACK_DURATION / 1000 * progressRatio;\n\n  audio.play().catch(() => {});\n  activeAudios.current.push(audio);\n}\n else if (shape.type.startsWith(\"음계\")) {\n      const group = shape.group;\n      if (!group || !pitch) return;\n      const validGroups = pitchGroups[color];\n      if (!validGroups?.includes(group)) return;\n\n      const folder = color === \"#4284F3\" ? \"blue\"\n        : color === \"#6EC1A1\" ? \"green\"\n        : color === \"#F5BC62\" ? \"yellow\"\n        : color === \"#FE6E3D\" ? \"orange\"\n        : \"pink\";\n\n      const pitchMap = {\n        \"C\": \"C\", \"D\": \"D\", \"E\": \"E\", \"F\": \"F\", \"G\": \"G\", \"A\": \"A\", \"B\": \"B\", \"C'\": \"Cprime\"\n      };\n      const safePitch = pitchMap[pitch];\n      const path = `${process.env.PUBLIC_URL}/sound/pitch/${folder}/${group}/${group}_${safePitch}.mp3`;\naudio = new Audio(path);\n      audio.volume = 0.7;\n    } else if (shape.type.startsWith(\"박자\")) {\n      const files = rhythmSounds[color];\n      if (!files) return;\n      audio = new Audio(files[Math.floor(Math.random() * files.length)]);\n      audio.volume = 0.4;\n    }\n\n    if (audio) {\n      audio.play().catch(() => {});\n      activeAudios.current.push(audio);\n    }\n  };\n\n  const step = (timestamp) => {\n  if (!isPlayingRef.current || isPausedRef.current) return;\n\n  const svgWidth = svgRef.current?.clientWidth || 800;\n  const svgHeight = svgRef.current?.clientHeight || 800;\n\n  if (!startTimeRef.current) {\n    startTimeRef.current = timestamp - (pauseTimeRef.current || 0);\n  }\n\n  const elapsed = timestamp - startTimeRef.current;\n  const newX = (elapsed / PLAYBACK_DURATION) * svgWidth;\n\n  if (newX > svgWidth) {\n    setIsPlaying(false);\n    setPlayheadX(0);\n    startTimeRef.current = null;\n    pauseTimeRef.current = null;\n    cancelAnimationFrame(animationRef.current);\n\n    if (onPlaybackEnd) onPlaybackEnd(); // ✅ 한 번만 실행\n    return;\n  }\n\n  setPlayheadX(newX);\n\n  shapesRef.current.forEach((shape) => {\n    const shapeX = (shape.xPercent / 100) * svgWidth;\n    const shapeY = (shape.yPercent / 100) * svgHeight;\n\n    if (shape.type.startsWith(\"배경음\")) {\n      if (shape.lastPlayed === 0) {\n        playSoundForShape(shape, null, elapsed);\n      }\n    } else {\n      if (Math.abs(shapeX - newX) < 10) {\n        const pitch = shape.type.startsWith(\"음계\") ? getPitchFromY(shapeY, svgHeight) : null;\n        playSoundForShape(shape, pitch, elapsed);\n      }\n    }\n  });\n\n  animationRef.current = requestAnimationFrame(step); // 🔁 계속 반복\n};\n\n\n  const startPlayback = () => {\n  shapesRef.current.forEach((s) => (s.lastPlayed = 0));\n  setIsPlaying(true);\n  setIsPaused(false);\n  setPlayheadX(0);\n  startTimeRef.current = null;\n  pauseTimeRef.current = null;\n  activeAudios.current = [];\n\n  cancelAnimationFrame(animationRef.current); // 중복 방지\n  animationRef.current = requestAnimationFrame(step);\n};\n\n  const pausePlayback = () => {\n    if (isPlaying && !isPaused) {\n      setIsPaused(true);\n      pauseTimeRef.current = performance.now() - startTimeRef.current;\n      cancelAnimationFrame(animationRef.current);\n      activeAudios.current.forEach((a) => a.pause());\n      activeAudios.current = [];\n    }\n  };\n\n  const resumePlayback = () => {\n    if (isPlaying && isPaused) {\n      setIsPaused(false);\n      animationRef.current = requestAnimationFrame(step);\n    }\n  };\n\n  const togglePlayPause = () => {\n  if (isPlaying) {\n    if (isPaused) {\n      startTimeRef.current = null; // ✅ 꼭 추가\n      resumePlayback();\n    } else {\n      pausePlayback();\n    }\n  } else {\n    // 재생이 멈춘 상태라면 startTime도 초기화 필요\n    startTimeRef.current = null; // ✅ 꼭 추가\n    startPlayback();\n  }\n};\n\n\nconst seekPlayback = (direction) => {\n  const svgWidth = svgRef.current?.clientWidth || 800;\n  const delta = (3000 / PLAYBACK_DURATION) * svgWidth;\n\n  const prevX = playheadX;\n  const nextX = Math.max(0, Math.min(svgWidth, direction === \"back\" ? prevX - delta : prevX + delta));\n\n  setPlayheadX(Math.round(nextX));\n  pauseTimeRef.current = Math.round((nextX / svgWidth) * PLAYBACK_DURATION);\n\n  shapesRef.current.forEach(s => s.lastPlayed = 0);\n\n\n};\n\n\n\n\n\n\n\n\n\n  const addShape = (shapeIdParam, categoryParam) => {\n    if (readOnly) return; // 🔒 예제 모드일 경우 도형 추가 차단\n  if (!shapeIdParam || !categoryParam) return;\n  const newShape = initialShape(20, 50, shapeIdParam);\n\n  if (categoryParam === \"음계\") {\n    newShape.y = getClosestLeadY(newShape.y);\n    newShape.group = pitchGroups[getClosestLeadY(newShape.y)];\n  }\n\n  setShapes((prev) => [...prev, newShape]);\n};\n\n\n  const handleMouseMove = (e) => {\n  const svgRect = svgRef.current.getBoundingClientRect();\n  const svgWidth = svgRect.width;\n  const svgHeight = svgRect.height;\n\n  if (draggingId) {\n    const newShapes = shapesRef.current.map((shape) => {\n      if (shape.id === draggingId) {\n        const offsetY = shape.type.startsWith(\"강세\") ? 200 : 0;\n        const rawY = ((e.clientY - svgRect.top - offsetY) / svgHeight) * svgHeight;\n        const snappedY = shape.type.startsWith(\"음계\") ? getClosestLeadY(rawY, svgHeight) : rawY;\n\n        return {\n          ...shape,\n          xPercent: ((e.clientX - svgRect.left) / svgWidth) * 100,\n          yPercent: (snappedY / svgHeight) * 100,\n        };\n      }\n      return shape;\n    });\n    setShapes(newShapes);\n  }\n};\n\nconst handleDownload = () => {\n  if (!svgRef.current) return;\n\n  toPng(svgRef.current, {\n    backgroundColor: \"#F7F2EA\",  // SVG 배경 흰색\n    cacheBust: true,\n    embedWebFonts: false\n  })\n    .then((dataUrl) => {\n      download(dataUrl, \"my-score.png\");\n\n      // 👉 이미지 다운로드 후 로컬 저장용 데이터 생성\n      const item = {\n        id: uuidv4(),\n        image: dataUrl,\n        composer: composerName || \"익명\",\n        likes: 0,\n        comments: [],\n        shapeData: shapesRef.current,\n        createdAt: Date.now(),\n      };\n\n      // 👉 저장 기능 임시 비활성화 (QuotaExceededError 방지)\n      try {\n        const prev = JSON.parse(localStorage.getItem(\"galleryItems\") || \"[]\");\n        // localStorage.setItem(\"galleryItems\", JSON.stringify([item, ...prev]));\n        console.warn(\"🛑 localStorage 저장은 현재 비활성화됨 (용량 초과 방지)\");\n      } catch (e) {\n        console.error(\"갤러리 저장 실패:\", e);\n      }\n    })\n    .catch((err) => {\n      console.error(\"이미지 다운로드 또는 저장 실패:\", err);\n    });\n};\n\n\n\n\n\n  return (\n    <section className=\"builder-section\">\n      <div className={`builder-canvas ${readOnly ? \"read-only\" : \"\"}`}>\n        <svg\n          ref={svgRef}\n          className=\"builder-svg\"\n          onMouseMove={handleMouseMove}\n          onMouseUp={() => setDraggingId(null)}\n          onClick={(e) => {\n            if (e.target === e.currentTarget) setSelectedId(null);\n          }}\n        >\n          {showPitchLines && !readOnly &&\n            Array.from({ length: NUM_PITCH_LINES }).map((_, i) => {\n              const svgHeight = svgRef.current?.clientHeight || 800;\n              const svgWidth = svgRef.current?.clientWidth || 800;\n              const centerY = svgHeight / 2;\n              const y = centerY + (i - 3.5) * LINE_SPACING;\n              return <line key={i} x1={0} y1={y} x2={svgWidth} y2={y} stroke=\"red\" strokeWidth=\"1\" />;\n            })}\n\n          {shapes.map((shape) => {\n            const svgWidth = svgRef.current?.clientWidth || 800;\n            const svgHeight = svgRef.current?.clientHeight || 800;\n            const x = (shape.xPercent / 100) * svgWidth;\n            const y = (shape.yPercent / 100) * svgHeight;\n            const isSelected = selectedId === shape.id;\n\n            if (shape.type === \"배경음-1\") {\n  const svgWidth = svgRef.current?.clientWidth || 800;\n  const svgHeight = svgRef.current?.clientHeight || 800;\n  const y = (shape.yPercent / 100) * svgHeight;\n  const isSelected = selectedId === shape.id;\n\n  return (\n    <line\n      key={shape.id}\n      x1={0}\n      y1={y}\n      x2={svgWidth}\n      y2={y}\n      stroke={shape.customColor || \"black\"}\n      strokeWidth={isSelected ? 8 : 6}\n      strokeDasharray=\"12 8\" // 점선 처리\n      onMouseDown={(e) => {\n        e.stopPropagation();\n        setDraggingId(shape.id);\n      }}\n      onClick={(e) => {\n        e.stopPropagation();\n        setSelectedId(shape.id);\n      }}\n    />\n  );\n}\n\nif (shape.type === \"배경음-3\") {\n  const svgWidth = svgRef.current?.clientWidth || 800;\n  const svgHeight = svgRef.current?.clientHeight || 800;\n  const y = (shape.yPercent / 100) * svgHeight;\n  const isSelected = selectedId === shape.id;\n\n  return renderWavyLineShape(\n    y,\n    svgWidth,\n    shape.customColor || \"black\",\n    isSelected,\n    shape,\n    setDraggingId,\n    setSelectedId\n  );\n}\n\nif (shape.type === \"배경음-4\") {\n  const svgWidth = svgRef.current?.clientWidth || 800;\n  const svgHeight = svgRef.current?.clientHeight || 800;\n  const y = (shape.yPercent / 100) * svgHeight;\n  const isSelected = selectedId === shape.id;\n\n  return renderCurvedEmotionLine(\n    y,\n    svgWidth,\n    shape.customColor || \"black\",\n    isSelected,\n    shape,\n    setDraggingId,\n    setSelectedId\n  );\n}\n\nif (shape.type === \"배경음-5\") {\n  const svgWidth = svgRef.current?.clientWidth || 800;\n  const svgHeight = svgRef.current?.clientHeight || 800;\n  const y = (shape.yPercent / 100) * svgHeight;\n  const isSelected = selectedId === shape.id;\n\n  return renderSharpBeatLine(\n    y,\n    svgWidth,\n    shape.customColor || \"black\",\n    isSelected,\n    shape,\n    setDraggingId,\n    setSelectedId\n  );\n}\n\n\n\n            if (shape.type.startsWith(\"배경음\")) {\n              return (\n                <line\n                  key={shape.id}\n                  x1={0}\n                  y1={y}\n                  x2={svgWidth}\n                  y2={y}\n                  stroke={shape.customColor || \"black\"}\n                  strokeWidth={isSelected ? 8 : 6}\n                  onMouseDown={(e) => {\n                    e.stopPropagation();\n                    setDraggingId(shape.id);\n                  }}\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    setSelectedId(shape.id);\n                  }}\n                />\n              );\n            }\n\n            if (shape.type === \"강세-1\") {\n  const svgWidth = svgRef.current?.clientWidth || 800;\n  const svgHeight = svgRef.current?.clientHeight || 800;\n  const y = (shape.yPercent / 100) * svgHeight;\n  const isSelected = selectedId === shape.id;\n\n  return renderAccentBar(\n    y,\n    svgWidth,\n    isSelected,\n    shape,\n    setDraggingId,\n    setSelectedId\n  );\n}\n\nif (shape.type === \"강세-2\") {\n  const svgWidth = svgRef.current?.clientWidth || 800;\n  const svgHeight = svgRef.current?.clientHeight || 800;\n  const y = (shape.yPercent / 100) * svgHeight;\n  const isSelected = selectedId === shape.id;\n\n  return renderDecreasingVolumeAccent(\n    y,\n    svgWidth,\n    isSelected,\n    shape,\n    setDraggingId,\n    setSelectedId\n  );\n}\n\nif (shape.type === \"강세-3\") {\n  const svgWidth = svgRef.current?.clientWidth || 800;\n  const svgHeight = svgRef.current?.clientHeight || 800;\n  const y = (shape.yPercent / 100) * svgHeight;\n  const isSelected = selectedId === shape.id;\n\n  return renderSwellingAccentBar(\n    y,\n    svgWidth,\n    isSelected,\n    shape,\n    setDraggingId,\n    setSelectedId\n  );\n}\n\nif (shape.type === \"강세-4\") {\n  const svgWidth = svgRef.current?.clientWidth || 800;\n  const svgHeight = svgRef.current?.clientHeight || 800;\n  const y = (shape.yPercent / 100) * svgHeight;\n  const isSelected = selectedId === shape.id;\n\n  return renderGrowingAccentBar(\n    y,\n    svgWidth,\n    isSelected,\n    shape,\n    setDraggingId,\n    setSelectedId\n  );\n}\n\nif (shape.type === \"강세-5\") {\n  const svgWidth = svgRef.current?.clientWidth || 800;\n  const svgHeight = svgRef.current?.clientHeight || 800;\n  const y = (shape.yPercent / 100) * svgHeight;\n  const isSelected = selectedId === shape.id;\n\n  return renderShrinkingAccentBar(\n    y,\n    svgWidth,\n    isSelected,\n    shape,\n    setDraggingId,\n    setSelectedId\n  );\n}\n\n\n\nif (shape.type === \"박자-1\") {\n  const HITBOX_SIZE = 24;\n  return (\n    <g\n      key={shape.id}\n      onMouseDown={(e) => {\n        e.stopPropagation();\n        setDraggingId(shape.id);\n      }}\n      onClick={(e) => {\n        e.stopPropagation();\n        setSelectedId(shape.id);\n      }}\n    >\n      <rect\n        x={x - HITBOX_SIZE / 2}\n        y={y - HITBOX_SIZE / 2}\n        width={HITBOX_SIZE}\n        height={HITBOX_SIZE}\n        fill=\"transparent\"\n        pointerEvents=\"all\"\n      />\n      {renderStarShapeFromMatter(x, y, shape.customColor || \"black\", isSelected)}\n    </g>\n  );\n}\n\nif (shape.type === \"박자-2\") {\n  const HITBOX_SIZE = 24;\n  return (\n    <g\n      key={shape.id}\n      onMouseDown={(e) => {\n        e.stopPropagation();\n        setDraggingId(shape.id);\n      }}\n      onClick={(e) => {\n        e.stopPropagation();\n        setSelectedId(shape.id);\n      }}\n    >\n      <rect\n        x={x - HITBOX_SIZE / 2}\n        y={y - HITBOX_SIZE / 2}\n        width={HITBOX_SIZE}\n        height={HITBOX_SIZE}\n        fill=\"transparent\"\n        pointerEvents=\"all\"\n      />\n      {renderHollowStarShape(x, y, shape.customColor || \"black\", isSelected)}\n    </g>\n  );\n}\n\nif (shape.type === \"박자-3\") {\n  const HITBOX_SIZE = 24;\n  return (\n    <g\n      key={shape.id}\n      onMouseDown={(e) => {\n        e.stopPropagation();\n        setDraggingId(shape.id);\n      }}\n      onClick={(e) => {\n        e.stopPropagation();\n        setSelectedId(shape.id);\n      }}\n    >\n      <rect\n        x={x - HITBOX_SIZE / 2}\n        y={y - HITBOX_SIZE / 2}\n        width={HITBOX_SIZE}\n        height={HITBOX_SIZE}\n        fill=\"transparent\"\n        pointerEvents=\"all\"\n      />\n      {renderCompactStarShape(\n        x,\n        y,\n        shape.customColor || \"black\",\n        isSelected,\n        shape.id,\n        setSelectedId,\n        setDraggingId\n      )}\n    </g>\n  );\n}\n\n\nif (shape.type === \"박자-4\") {\n  return (\n    <g\n      key={shape.id}\n      onMouseDown={(e) => {\n        e.stopPropagation();\n        setDraggingId(shape.id);\n      }}\n      onClick={(e) => {\n        e.stopPropagation();\n        setSelectedId(shape.id);\n      }}\n    >\n      {renderDonutShape(x, y, shape.customColor || \"black\", isSelected)}\n    </g>\n  );\n}\n\nif (shape.type === \"박자-5\") {\n  return (\n    <g\n      key={shape.id}\n      onMouseDown={(e) => {\n        e.stopPropagation();\n        setDraggingId(shape.id);\n      }}\n      onClick={(e) => {\n        e.stopPropagation();\n        setSelectedId(shape.id);\n      }}\n    >\n      {renderSmallDonutShape(x, y, shape.customColor || \"black\", isSelected)}\n    </g>\n  );\n}\n\nif (shape.type === \"박자-6\") {\n  return (\n    <g\n      key={shape.id}\n      onMouseDown={(e) => {\n        e.stopPropagation();\n        setDraggingId(shape.id);\n      }}\n      onClick={(e) => {\n        e.stopPropagation();\n        setSelectedId(shape.id);\n      }}\n    >\n      {renderSmallFilledCircle(x, y, shape.customColor || \"black\", isSelected)}\n    </g>\n  );\n}\n\nif (shape.type === \"박자-7\") {\n  return (\n    <g\n      key={shape.id}\n      onMouseDown={(e) => {\n        e.stopPropagation();\n        setDraggingId(shape.id);\n      }}\n      onClick={(e) => {\n        e.stopPropagation();\n        setSelectedId(shape.id);\n      }}\n    >\n      {renderFatStarShape(x, y, shape.customColor || \"black\", isSelected)}\n    </g>\n  );\n}\n\nif (shape.type === \"박자-8\") {\n  return (\n    <g\n      key={shape.id}\n      onMouseDown={(e) => {\n        e.stopPropagation();\n        setDraggingId(shape.id);\n      }}\n      onClick={(e) => {\n        e.stopPropagation();\n        setSelectedId(shape.id);\n      }}\n    >\n      {renderHollowFatStarShape(x, y, shape.customColor || \"black\", isSelected)}\n    </g>\n  );\n}\n\nif (shape.type === \"박자-9\") {\n  return (\n    <g\n      key={shape.id}\n      onMouseDown={(e) => {\n        e.stopPropagation();\n        setDraggingId(shape.id);\n      }}\n      onClick={(e) => {\n        e.stopPropagation();\n        setSelectedId(shape.id);\n      }}\n    >\n      {renderMiniFatStarShape(x, y, shape.customColor || \"black\", isSelected)}\n    </g>\n  );\n}\n\nif (shape.type === \"음계-1\") {\n  return (\n    <g\n      key={shape.id}\n      onMouseDown={(e) => {\n        e.stopPropagation();\n        setDraggingId(shape.id);\n      }}\n      onClick={(e) => {\n        e.stopPropagation();\n        setSelectedId(shape.id);\n      }}\n    >\n      {renderTriangleShape(x, y, shape.customColor || \"black\", isSelected)}\n    </g>\n  );\n}\n\nif (shape.type === \"음계-2\") {\n  return (\n    <g\n      key={shape.id}\n      onMouseDown={(e) => {\n        e.stopPropagation();\n        setDraggingId(shape.id);\n      }}\n      onClick={(e) => {\n        e.stopPropagation();\n        setSelectedId(shape.id);\n      }}\n    >\n      {renderSquareShape(x, y, shape.customColor || \"black\", isSelected)}\n    </g>\n  );\n}\n\nif (shape.type === \"음계-3\") {\n  return (\n    <g\n      key={shape.id}\n      onMouseDown={(e) => {\n        e.stopPropagation();\n        setDraggingId(shape.id);\n      }}\n      onClick={(e) => {\n        e.stopPropagation();\n        setSelectedId(shape.id);\n      }}\n    >\n      {renderCircleShape(x, y, shape.customColor || \"black\", isSelected)}\n    </g>\n  );\n}\n\nif (shape.type === \"음계-4\") {\n  return (\n    <g\n      key={shape.id}\n      onMouseDown={(e) => {\n        e.stopPropagation();\n        setDraggingId(shape.id);\n      }}\n      onClick={(e) => {\n        e.stopPropagation();\n        setSelectedId(shape.id);\n      }}\n    >\n      {renderSmallSquareShape(x, y, shape.customColor || \"black\", isSelected)}\n    </g>\n  );\n}\n\nif (shape.type === \"음계-5\") {\n  return (\n    <g\n      key={shape.id}\n      onMouseDown={(e) => {\n        e.stopPropagation();\n        setDraggingId(shape.id);\n      }}\n      onClick={(e) => {\n        e.stopPropagation();\n        setSelectedId(shape.id);\n      }}\n    >\n      {renderWideRectangleShape(x, y, shape.customColor || \"black\", isSelected)}\n    </g>\n  );\n}\n\nif (shape.type === \"음계-6\") {\n  return (\n    <g\n      key={shape.id}\n      onMouseDown={(e) => {\n        e.stopPropagation();\n        setDraggingId(shape.id);\n      }}\n      onClick={(e) => {\n        e.stopPropagation();\n        setSelectedId(shape.id);\n      }}\n    >\n      {renderHalfCircleShape(x, y, shape.customColor || \"black\", isSelected)}\n    </g>\n  );\n}\n\nif (shape.type === \"음계-7\") {\n  return (\n    <g\n      key={shape.id}\n      onMouseDown={(e) => {\n        e.stopPropagation();\n        setDraggingId(shape.id);\n      }}\n      onClick={(e) => {\n        e.stopPropagation();\n        setSelectedId(shape.id);\n      }}\n    >\n      {renderWideIsoscelesTriangle(x, y, shape.customColor || \"black\", isSelected)}\n    </g>\n  );\n}\n\nif (shape.type === \"음계-8\") {\n  return (\n    <g\n      key={shape.id}\n      onMouseDown={(e) => {\n        e.stopPropagation();\n        setDraggingId(shape.id);\n      }}\n      onClick={(e) => {\n        e.stopPropagation();\n        setSelectedId(shape.id);\n      }}\n    >\n      {renderDiamondSquareShape(x, y, shape.customColor || \"black\", isSelected)}\n    </g>\n  );\n}\n\nif (shape.type === \"음계-9\") {\n  return (\n    <g\n      key={shape.id}\n      onMouseDown={(e) => {\n        e.stopPropagation();\n        setDraggingId(shape.id);\n      }}\n      onClick={(e) => {\n        e.stopPropagation();\n        setSelectedId(shape.id);\n      }}\n    >\n      {renderSmallCircleShape(x, y, shape.customColor || \"black\", isSelected)}\n    </g>\n  );\n}\n\nif (shape.type === \"음계-10\") {\n  return (\n    <g\n      key={shape.id}\n      onMouseDown={(e) => {\n        e.stopPropagation();\n        setDraggingId(shape.id);\n      }}\n      onClick={(e) => {\n        e.stopPropagation();\n        setSelectedId(shape.id);\n      }}\n    >\n      {renderWavySvgDonutShape(x, y, shape.customColor || \"black\", isSelected)}\n    </g>\n  );\n}\n\nif (shape.type === \"음계-11\") {\n  return (\n    <g\n      key={shape.id}\n      onMouseDown={(e) => {\n        e.stopPropagation();\n        setDraggingId(shape.id);\n      }}\n      onClick={(e) => {\n        e.stopPropagation();\n        setSelectedId(shape.id);\n      }}\n    >\n      {renderFourPointStarShape(x, y, shape.customColor || \"black\", isSelected)}\n    </g>\n  );\n}\n\nif (shape.type === \"음계-12\") {\n  return (\n    <g\n      key={shape.id}\n      onMouseDown={(e) => {\n        e.stopPropagation();\n        setDraggingId(shape.id);\n      }}\n      onClick={(e) => {\n        e.stopPropagation();\n        setSelectedId(shape.id);\n      }}\n    >\n      {renderAsteriskShape(x, y, shape.customColor || \"black\", isSelected)}\n    </g>\n  );\n}\n\nif (shape.type === \"음계-13\") {\n  return (\n    <g\n      key={shape.id}\n      onMouseDown={(e) => {\n        e.stopPropagation();\n        setDraggingId(shape.id);\n      }}\n      onClick={(e) => {\n        e.stopPropagation();\n        setSelectedId(shape.id);\n      }}\n    >\n      {renderPointyDonutShape(x, y, shape.customColor || \"black\", isSelected)}\n    </g>\n  );\n}\n\nif (shape.type === \"음계-14\") {\n  return (\n    <g\n      key={shape.id}\n      onMouseDown={(e) => {\n        e.stopPropagation();\n        setDraggingId(shape.id);\n      }}\n      onClick={(e) => {\n        e.stopPropagation();\n        setSelectedId(shape.id);\n      }}\n    >\n      {renderEightPointStarShape(x, y, shape.customColor || \"black\", isSelected)}\n    </g>\n  );\n}\n\nif (shape.type === \"음계-15\") {\n  return (\n    <g\n      key={shape.id}\n      onMouseDown={(e) => {\n        e.stopPropagation();\n        setDraggingId(shape.id);\n      }}\n      onClick={(e) => {\n        e.stopPropagation();\n        setSelectedId(shape.id);\n      }}\n    >\n      {renderSixArmAsteriskShape(x, y, shape.customColor || \"black\", isSelected)}\n    </g>\n  );\n}\n\nif (shape.type === \"음계-16\") {\n  return (\n    <g\n      key={shape.id}\n      onMouseDown={(e) => {\n        e.stopPropagation();\n        setDraggingId(shape.id);\n      }}\n      onClick={(e) => {\n        e.stopPropagation();\n        setSelectedId(shape.id);\n      }}\n    >\n      {renderGearDonutShape(x, y, shape.customColor || \"black\", isSelected)}\n    </g>\n  );\n}\n\nif (shape.type === \"음계-17\") {\n  return (\n    <g\n      key={shape.id}\n      onMouseDown={(e) => {\n        e.stopPropagation();\n        setDraggingId(shape.id);\n      }}\n      onClick={(e) => {\n        e.stopPropagation();\n        setSelectedId(shape.id);\n      }}\n    >\n      {renderBroadEightPointStar(x, y, shape.customColor || \"black\", isSelected)}\n    </g>\n  );\n}\n\nif (shape.type === \"음계-18\") {\n  return (\n    <g\n      key={shape.id}\n      onMouseDown={(e) => {\n        e.stopPropagation();\n        setDraggingId(shape.id);\n      }}\n      onClick={(e) => {\n        e.stopPropagation();\n        setSelectedId(shape.id);\n      }}\n    >\n      {renderBarAsteriskShape(x, y, shape.customColor || \"black\", isSelected)}\n    </g>\n  );\n}\n\n\n\n\n            return (\n              <circle\n                key={shape.id}\n                cx={x}\n                cy={y}\n                r=\"12\"\n                fill={shape.customColor || \"skyblue\"}\n                stroke={isSelected ? \"black\" : \"none\"}\n                strokeWidth=\"2\"\n                onMouseDown={(e) => {\n                  e.stopPropagation();\n                  setDraggingId(shape.id);\n                }}\n                onClick={(e) => {\n                  e.stopPropagation();\n                  setSelectedId(shape.id);\n                }}\n              />\n            );\n          })}\n\n          {isPlaying && (\n            <line\n              x1={playheadX}\n              y1={0}\n              x2={playheadX}\n              y2={svgRef.current?.clientHeight || 800}\n              stroke=\"red\"\n              strokeWidth={2}\n            />\n          )}\n        </svg>\n      </div>\n\n      <div className=\"builder-controls\">\n        <div className=\"shape-category-wrapper\"></div>\n        {!readOnly && !selectedCategory ? (\n          <div>\n            {CATEGORIES.map((cat) => {\n  const representativeShape = {\n    박자: \"박자-1\",\n    음계: \"음계-3\",\n    배경음: \"배경음-3\",\n    강세: \"강세-2\",\n  }[cat];\n\n  const tooltips = {\n    박자: \"도형을 추가해 박자를 만들어보세요.\",\n    음계: \"원하는 음을 구성해보세요.\",\n    배경음: \"소리의 배경 분위기를 더해보세요.\",\n    강세: \"음악의 강약을 조절해보세요.\",\n  };\n\n  return (\n    <div key={cat} className=\"tooltip-wrapper\">\n      <button\n        onClick={() => {\n          setSelectedCategory(cat);\n          setSelectedShape(null);\n        }}\n        className={`shape-icon-button ${selectedCategory === cat ? \"selected\" : \"\"}`}\n      >\n        <svg width=\"50\" height=\"50\" viewBox=\"0 0 120 120\">\n          {renderShapePreview(representativeShape, 60, 60)}\n        </svg>\n      </button>\n      <span className=\"tooltip-text\">{tooltips[cat]}</span>\n    </div>\n  );\n})}\n\n\n          </div>\n        ) : (\n          <>\n          {!readOnly && (\n            <div>\n              <div style={{ display: \"flex\", alignItems: \"center\", gap: \"8px\" }}>\n  <button\n    onClick={() => setShapePage((prev) => Math.max(prev - 1, 0))}\n    disabled={shapePage === 0}\n  >\n    ◀\n  </button>\n\n  {paginatedShapes.map((shapeId) => (\n  <button\n    key={shapeId}\n    className={`shape-icon-button ${selectedShape === shapeId ? \"selected\" : \"\"}`}\n    onClick={() => {\n      setSelectedShape(shapeId);\n      addShape(shapeId, selectedCategory); // ✅ 선택 즉시 도형 추가\n    }}\n  >\n    <svg width=\"60\" height=\"60\" viewBox=\"0 0 120 120\">\n      {renderShapePreview(shapeId, 60, 60)}\n    </svg>\n  </button>\n))}\n\n  <button\n    onClick={() =>\n      setShapePage((prev) =>\n        (prev + 1) * shapesPerPage < currentShapes.length ? prev + 1 : prev\n      )\n    }\n    disabled={(shapePage + 1) * shapesPerPage >= currentShapes.length}\n  >\n    ▶\n  </button>\n  <button onClick={() => setSelectedCategory(null)}>BACK</button>\n            \n</div>\n\n            </div>\n  \n          )}\n  </>\n)}\n\n        <div style={{ marginTop: 10 }}>\n  <div className=\"play-controls\" style={{ display: \"flex\", gap: \"10px\", alignItems: \"center\" }}>\n    <button onClick={() => seekPlayback(\"back\")}><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"43\" height=\"27\" viewBox=\"0 0 43 27\" fill=\"none\">\n    <path d=\"M20.5 10.9019C18.5 12.0566 18.5 14.9434 20.5 16.0981L31.75 22.5933C33.75 23.748 36.25 22.3046 36.25 19.9952V7.00481C36.25 4.69541 33.75 3.25203 31.75 4.40673L20.5 10.9019Z\" fill=\"#4C3A2E\"/>\n    <path d=\"M4.5 10.9019C2.5 12.0566 2.5 14.9434 4.5 16.0981L15.75 22.5933C17.75 23.748 20.25 22.3046 20.25 19.9952V7.00481C20.25 4.69541 17.75 3.25203 15.75 4.40673L4.5 10.9019Z\" fill=\"#4C3A2E\"/>\n  </svg></button>\n    <button onClick={togglePlayPause} className=\"play-button\">\n  {isPlaying ? (\n    isPaused ? (\n      // ▶ Resume\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"25\" height=\"29\" viewBox=\"0 0 25 29\" fill=\"none\">\n        <path d=\"M23.5 11.9019C25.5 13.0566 25.5 15.9434 23.5 17.0981L4.75 27.9234C2.75 29.0781 0.25 27.6347 0.25 25.3253V3.67468C0.25 1.36528 2.75 -0.0780933 4.75 1.07661L23.5 11.9019Z\" fill=\"#4C3A2E\"/>\n      </svg>\n    ) : (\n      // ⏸ Pause\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"17\" height=\"26\" viewBox=\"0 0 17 26\" fill=\"none\">\n  <rect width=\"6.61099\" height=\"25.4995\" rx=\"2\" fill=\"black\"/>\n  <rect x=\"10.3892\" width=\"6.61099\" height=\"25.4995\" rx=\"2\" fill=\"#4C3A2E\"/>\n</svg>\n    )\n  ) : (\n    // ▶ First play\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"25\" height=\"29\" viewBox=\"0 0 25 29\" fill=\"none\">\n      <path d=\"M23.5 11.9019C25.5 13.0566 25.5 15.9434 23.5 17.0981L4.75 27.9234C2.75 29.0781 0.25 27.6347 0.25 25.3253V3.67468C0.25 1.36528 2.75 -0.0780933 4.75 1.07661L23.5 11.9019Z\" fill=\"#4C3A2E\"/>\n    </svg>\n  )}\n</button>\n\n    <button onClick={() => seekPlayback(\"forward\")}><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"43\" height=\"27\" viewBox=\"0 0 43 27\" fill=\"none\">\n    <path d=\"M22.5 10.9019C24.5 12.0566 24.5 14.9434 22.5 16.0981L11.25 22.5933C9.25 23.748 6.75 22.3046 6.75 19.9952V7.00481C6.75 4.69541 9.25 3.25203 11.25 4.40673L22.5 10.9019Z\" fill=\"#4C3A2E\"/>\n    <path d=\"M38.5 10.9019C40.5 12.0566 40.5 14.9434 38.5 16.0981L27.25 22.5933C25.25 23.748 22.75 22.3046 22.75 19.9952V7.00481C22.75 4.69541 25.25 3.25203 27.25 4.40673L38.5 10.9019Z\" fill=\"#4C3A2E\"/>\n  </svg></button>\n  </div>\n          {!readOnly && (\n  <button className=\"save-button\" onClick={() => setShowSaveModal(true)}>\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\">\n    <path\n      d=\"M12.9468 16.332L7.94678 11.332L9.34678 9.88203L11.9468 12.482V4.33203H13.9468V12.482L16.5468 9.88203L17.9468 11.332L12.9468 16.332ZM6.94678 20.332C6.39678 20.332 5.92594 20.1362 5.53428 19.7445C5.14261 19.3529 4.94678 18.882 4.94678 18.332V15.332H6.94678V18.332H18.9468V15.332H20.9468V18.332C20.9468 18.882 20.7509 19.3529 20.3593 19.7445C19.9676 20.1362 19.4968 20.332 18.9468 20.332H6.94678Z\"\n      fill=\"#4C3A2E\"\n    />\n  </svg>\n</button>\n)}\n\n\n\n\n        </div>\n\n{showSaveModal && (\n  <div className=\"modal-overlay\" onClick={() => setShowSaveModal(false)}>\n    <div className=\"save-modal\" onClick={(e) => e.stopPropagation()}>\n      <h3>저장 방법 선택</h3>\n      <input\n        type=\"text\"\n        placeholder=\"작곡가 이름 입력\"\n        value={composerName}\n        onChange={(e) => setComposerName(e.target.value)}\n      />\n      <button onClick={handleDownload}>다운로드</button>\n      <button onClick={() => {\n        handleSaveToGallery(composerName);\n        setShowSaveModal(false);\n      }}>갤러리에 저장</button>\n      <button onClick={() => setShowSaveModal(false)}>취소</button>\n    </div>\n  </div>\n)}\n\n\n\n{!readOnly && selectedId && (\n  <div\n    ref={colorPaletteRef}\n    style={{\n      position: \"absolute\",\n      top: `${palettePos.y - 70}px`,  // 도형 아래\n      left: `${palettePos.x - 70}px`, // 도형 오른쪽\n      display: \"flex\",\n      gap: \"6px\",\n      background: \"#F7F2EA\", // ✅ 베이지 배경\n      padding: \"4px 6px\",\n      borderRadius: \"6px\",\n      boxShadow: \"0 2px 8px rgba(0,0,0,0.15)\",\n      zIndex: 1000\n    }}\n  >\n    {[\"#FE6E3D\", \"#6EC1A1\", \"#F5BC62\", \"#4284F3\", \"#EF7A88\"].map((color) => (\n      <button\n        key={color}\n        style={{\n          backgroundColor: color,\n          width: 20,\n          height: 20,\n          borderRadius: \"50%\", // ✅ 완전한 원형\n        boxShadow: \"0 1px 3px rgba(0, 0, 0, 0.15)\", // 살짝 입체감\n          cursor: \"pointer\",\n          padding: 0,\n    boxSizing: \"border-box\",\n    display: \"inline-block\", // 혹시 몰라서 추가\n    outline: \"none\",\n        }}\n        onClick={(e) => {\n          e.stopPropagation();\n          setSelectedColor(color);\n          setShapes(prev =>\n            prev.map(shape => {\n              if (shape.id === selectedId) {\n                const groups = pitchGroups[color];\n                const newGroup = groups?.length > 0\n                  ? groups[Math.floor(Math.random() * groups.length)]\n                  : shape.group;\n                return { ...shape, customColor: color, group: newGroup };\n              }\n              return shape;\n            })\n          );\n        }}\n      />\n    ))}\n  </div>\n)}\n\n\n\n\n        {!readOnly && (\n  <div className=\"pitchline-toggle tooltip-wrapper\">\n    <label className=\"switch\">\n      <input\n        type=\"checkbox\"\n        checked={showPitchLines}\n        onChange={() => setShowPitchLines(!showPitchLines)}\n      />\n      <span className=\"slider\">\n        <span className=\"label-text\">Line</span>\n      </span>\n    </label>\n    <span className=\"tooltip-text\">리드 라인을 켜거나 끌 수 있어요.</span>\n  </div>\n)}\n\n      </div>\n    </section>\n\n    \n  );\n};\n\nexport default SoundPatternBuilder;\n","import React, { useEffect, useRef, useState } from 'react';\nimport Matter from 'matter-js';\nimport * as decomp from 'poly-decomp';\n\nif (typeof window !== 'undefined') {\n  window.decomp = decomp;\n  Matter.Common.setDecomp(decomp);\n}\n\nconst MatterScene = () => {\n  const sceneRef = useRef(null);\n  const engineRef = useRef(null);\n  const runnerRef = useRef(null);\n  const [hasStarted, setHasStarted] = useState(false);\n\n  useEffect(() => {\n    const {\n      Engine,\n      Render,\n      World,\n      Bodies,\n      Body,\n      Mouse,\n      MouseConstraint,\n      Events,\n      Runner,\n    } = Matter;\n\n    const container = sceneRef.current;\n    const engine = Engine.create();\n    const world = engine.world;\n    const runner = Runner.create();\n    engineRef.current = engine;\n    runnerRef.current = runner;\n\n    const render = Render.create({\n      element: container,\n      engine,\n      options: {\n        width: window.innerWidth,\n        height: window.innerHeight,\n        wireframes: false,\n        background: '#F7F2EA',\n      },\n    });\n\n    Object.assign(render.canvas.style, {\n      position: 'absolute',\n      top: '0',\n      left: '0',\n      width: '100%',\n      height: '100%',\n      zIndex: '0',\n      pointerEvents: 'auto',\n    });\n\n    Render.run(render); // ⚠️ Runner는 아직 실행하지 않음\n\n    const soundPaths = [\n  `${process.env.PUBLIC_URL}/sound/for_site/for_home/Crystal_Ping.mp3`,\n  `${process.env.PUBLIC_URL}/sound/for_site/for_home/Glass_Tinkle.mp3`,\n  `${process.env.PUBLIC_URL}/sound/for_site/for_home/Metallic_Clink.mp3`,\n  `${process.env.PUBLIC_URL}/sound/for_site/for_home/Muted_Xylo_Tap_3.mp3`,\n  `${process.env.PUBLIC_URL}/sound/for_site/for_home/Paper_Snap.mp3`,\n  `${process.env.PUBLIC_URL}/sound/for_site/for_home/Piano_High_Key.mp3`,\n  `${process.env.PUBLIC_URL}/sound/for_site/for_home/Pop.mp3`,\n  `${process.env.PUBLIC_URL}/sound/for_site/for_home/Soft_Harp_Pluck.mp3`,\n  `${process.env.PUBLIC_URL}/sound/for_site/for_home/Tiny_Bell_Ding.mp3`,\n  `${process.env.PUBLIC_URL}/sound/for_site/for_home/Wood_Knock.mp3`,\n];\n    const sounds = soundPaths.map((src) => new Audio(src));\n\n    const shapes = [];\n\n    const createHalfCircle = (x, y, radius, segments, color) => {\n      const angleStep = Math.PI / segments;\n      const vertices = [{ x: 0, y: 0 }];\n      for (let i = 0; i <= segments; i++) {\n        const angle = Math.PI - i * angleStep;\n        vertices.push({ x: radius * Math.cos(angle), y: radius * Math.sin(angle) });\n      }\n      const translatedVertices = vertices.map((v) => ({ x: v.x + x, y: v.y + y }));\n      return Bodies.fromVertices(x, y, [translatedVertices], {\n        restitution: 0.7,\n        friction: 0.3,\n        render: { fillStyle: color },\n      }, true);\n    };\n\n    shapes.push(createHalfCircle(600, -300, 200, 40, '#F5BC62'));\n\n    const donut = Body.create({\n      parts: [\n        Bodies.circle(900, -300, 60, {\n          restitution: 0.7,\n          friction: 0.3,\n          render: { fillStyle: '#F5BC62' },\n        }),\n        Bodies.circle(900, -300, 30, {\n          isSensor: true,\n          render: { fillStyle: '#F7F2EA' },\n        }),\n      ],\n    });\n    shapes.push(donut);\n\n    shapes.push(Bodies.rectangle(400, -300, 120, 420, { restitution: 0.7, friction: 0.3, render: { fillStyle: '#4284F3' } }));\n    shapes.push(Bodies.polygon(800, -300, 3, 80, { restitution: 0.7, friction: 0.3, render: { fillStyle: '#6EC1A1' } }));\n    shapes.push(Bodies.rectangle(1000, -300, 98, 40, { restitution: 0.7, friction: 0.3, render: { fillStyle: '#EF7A88' } }));\n    shapes.push(Bodies.circle(1000, -300, 43.5, { restitution: 0.7, friction: 0.3, render: { fillStyle: '#FE6E3D' } }));\n    shapes.push(Bodies.circle(1000, -300, 82, { restitution: 0.7, friction: 0.3, render: { fillStyle: '#EF7A88' } }));\n    shapes.push(Bodies.rectangle(1000, -300, 64, 66, { restitution: 0.7, friction: 0.3, render: { fillStyle: '#6EC1A1' } }));\n\n    const starParts = (cx, cy, w, h, color) => {\n      const parts = [];\n      for (let i = 0; i < 12; i++) {\n        const angle = (i * 30 * Math.PI) / 180;\n        const rect = Bodies.rectangle(cx, cy, w, h, { render: { fillStyle: color } });\n        Body.setAngle(rect, angle);\n        parts.push(rect);\n        parts.push(\n          Bodies.circle(cx + Math.sin(angle) * h / 2, cy - Math.cos(angle) * h / 2, w / 2, { render: { fillStyle: color } }),\n          Bodies.circle(cx - Math.sin(angle) * h / 2, cy + Math.cos(angle) * h / 2, w / 2, { render: { fillStyle: color } })\n        );\n      }\n      return Body.create({ parts, restitution: 0.7, friction: 0.3 });\n    };\n\n    shapes.push(starParts(600, -500, 4, 210, '#FE6E3D'));\n    shapes.push(starParts(1000, -500, 19, 210, '#4284F3'));\n\n    const walls = [\n      Bodies.rectangle(-50, window.innerHeight / 2, 100, window.innerHeight, { isStatic: true, render: { visible: false } }),\n      Bodies.rectangle(window.innerWidth + 50, window.innerHeight / 2, 100, window.innerHeight, { isStatic: true, render: { visible: false } }),\n      Bodies.rectangle(window.innerWidth / 2, window.innerHeight + 50, window.innerWidth, 100, { isStatic: true, render: { visible: false } }),\n    ];\n    World.add(world, [...shapes, ...walls]);\n\n    const mouse = Mouse.create(render.canvas);\n    const mouseConstraint = MouseConstraint.create(engine, {\n      mouse,\n      constraint: { stiffness: 0.2, render: { visible: false } },\n    });\n    World.add(world, mouseConstraint);\n\n    mouse.pixelRatio = render.options.pixelRatio;\n    mouse.element.removeEventListener('wheel', mouse.mousewheel);\n    mouse.element.removeEventListener('DOMMouseScroll', mouse.mousewheel);\n\n    Events.on(engine, 'collisionStart', (event) => {\n      event.pairs.forEach(({ bodyA, bodyB }) => {\n        [bodyA, bodyB].forEach((body) => {\n          const index = shapes.indexOf(body);\n          if (index !== -1 && sounds[index] && sounds[index].paused) {\n            sounds[index].currentTime = 0;\n            sounds[index].play().catch(() => {});\n          }\n        });\n      });\n    });\n\n    Events.on(mouseConstraint, 'mousedown', (event) => {\n      const clickedBody = event.source.body;\n      const index = shapes.indexOf(clickedBody);\n      if (index !== -1 && sounds[index] && sounds[index].paused) {\n        sounds[index].currentTime = 0;\n        sounds[index].play().catch(() => {});\n      }\n    });\n\n    return () => {\n      Render.stop(render);\n      Runner.stop(runner);\n      World.clear(world);\n      Engine.clear(engine);\n      render.canvas.remove();\n    };\n  }, []);\n\n  const handleStart = () => {\n    const runner = runnerRef.current;\n    const engine = engineRef.current;\n\n    setHasStarted(true);\n\n    const sounds = document.querySelectorAll('audio');\n    sounds.forEach((audio) => {\n      audio.play().then(() => {\n        audio.pause();\n        audio.currentTime = 0;\n      }).catch(() => {});\n    });\n\n    Matter.Runner.run(runner, engine);\n  };\n\n  return (\n    <div ref={sceneRef} style={{ width: '100vw', height: '100vh' }} onClick={!hasStarted ? handleStart : undefined}>\n      {!hasStarted && (\n        <div style={{\n          position: 'absolute',\n          top: '60%',\n          left: '80%',\n          transform: 'translate(-50%, -50%)',\n          fontSize: '22px',\n          fontFamily: 'Lexend Giga',\n          fontWeight: '400',\n          color: '#333',\n          zIndex: 10,\n          pointerEvents: 'none',\n          opacity: hasStarted ? 0 : 1,\n          transition: 'opacity 1s ease',\n        }}>Click to Start</div>\n      )}\n    </div>\n  );\n};\n\nexport default MatterScene;\n","import React, { useEffect, useState, useRef } from 'react';\nimport './GallerySection.css';\n\nconst dummyItems = Array.from({ length: 10 }, (_, i) => ({\n  id: i + 1,\n  image: `${process.env.PUBLIC_URL}/img/image 69.png`,\n  composer: `작곡가 ${i + 1}`,\n  likes: 0,\n  comments: [],\n}));\n\n\nconst GallerySection = () => {\n  const [galleryItems, setGalleryItems] = useState(dummyItems);\n  const [sort, setSort] = useState(\"latest\");\n  const visibleRefs = useRef([]);\n  const [visibleIds, setVisibleIds] = useState([]);\n  const [clickedId, setClickedId] = useState(null);\n\n  useEffect(() => {\n    const observer = new IntersectionObserver(\n      (entries) => {\n        entries.forEach(entry => {\n          if (entry.isIntersecting) {\n            const id = entry.target.dataset.id;\n            setVisibleIds(prev =>\n              prev.includes(id) ? prev : [...prev, id]\n            );\n          }\n        });\n      },\n      { threshold: 0.2 }\n    );\n\n    visibleRefs.current.forEach(ref => {\n      if (ref) observer.observe(ref);\n    });\n\n    return () => {\n      visibleRefs.current.forEach(ref => {\n        if (ref) observer.unobserve(ref);\n      });\n    };\n  }, [galleryItems]);\n\n  const sortedItems = [...galleryItems].sort((a, b) => {\n    if (sort === \"popular\") return b.likes - a.likes;\n    return b.id - a.id;\n  });\n\n  const handleLike = (id) => {\n    setGalleryItems(prev =>\n      prev.map(item =>\n        item.id === id ? { ...item, likes: item.likes + 1 } : item\n      )\n    );\n    setClickedId(id); // 하트 클릭 상태 저장\n\n    setTimeout(() => {\n      setClickedId(null); // 1초 후 원래 색으로 복귀\n    }, 1000);\n  };\n\n  return (\n    <>\n      <div style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\n        <div className=\"sort-buttons\">\n          <button\n            className={`sort-button ${sort === \"latest\" ? \"active\" : \"\"}`}\n            onClick={() => setSort(\"latest\")}\n          >\n            최신순\n          </button>\n          <button\n            className={`sort-button ${sort === \"popular\" ? \"active\" : \"\"}`}\n            onClick={() => setSort(\"popular\")}\n          >\n            인기순\n          </button>\n        </div>\n      </div>\n\n      <div className=\"gallery-grid\">\n        {sortedItems.map((item, index) => (\n          <div\n            key={item.id}\n            data-id={item.id}\n            ref={(el) => (visibleRefs.current[index] = el)}\n            className={`gallery-card ${visibleIds.includes(String(item.id)) ? \"visible\" : \"\"}`}\n            style={{\n              transitionDelay: `${index * 100}ms`,\n            }}\n            onClick={() => console.log(\"재생용 도형 데이터:\", item.shapeData)}\n          >\n            <img src={item.image} alt=\"악보\" />\n            <div className=\"card-footer\">\n              <strong>{item.composer}</strong>\n              <button\n                className={`like-button ${clickedId === item.id ? \"liked\" : \"\"}`}\n                onClick={(e) => {\n                  e.stopPropagation();\n                  handleLike(item.id);\n                }}\n              >\n                ♡ {item.likes}\n              </button>\n            </div>\n          </div>\n        ))}\n      </div>\n    </>\n  );\n};\n\nexport default GallerySection;\n","import React, { useEffect, useRef, useState } from \"react\";\n\nfunction ComposeSlideSection() {\n  const textPathRef = useRef(null);\n  const sectionRef = useRef(null);\n  const [showScrollIcon, setShowScrollIcon] = useState(false);\n\n  // 회전 텍스트 애니메이션\n  useEffect(() => {\n    let offset = 0;\n    let animationFrame;\n    const animateOffset = () => {\n      offset -= 100 / (60 * 60);\n      if (offset < -100) offset = 0;\n      if (textPathRef.current) {\n        textPathRef.current.setAttribute(\"startOffset\", `${offset}%`);\n      }\n      animationFrame = requestAnimationFrame(animateOffset);\n    };\n    animationFrame = requestAnimationFrame(animateOffset);\n    return () => cancelAnimationFrame(animationFrame);\n  }, []);\n\n  // 5초 후 스크롤 아이콘 등장\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setShowScrollIcon(true);\n    }, 5000);\n    return () => clearTimeout(timer);\n  }, []);\n\n  return (\n    <section ref={sectionRef} style={styles.section}>\n      <style>{`\n        @keyframes bounce {\n          0%, 100% { transform: translate(-50%, 50%); }\n          50% { transform: translate(-50%, 45%); }\n        }\n      `}</style>\n\n      <div style={styles.ellipse}>\n        <svg viewBox=\"0 0 1650 950\" width=\"100%\" height=\"100%\" style={{ position: \"absolute\", top: 0, left: 0 }}>\n          <defs>\n            <path\n              id=\"grayEllipsePath\"\n              d=\"M 75,475 A 750,356 0 1,1 1575,475 A 750,356 0 1,1 75,475\"\n              fill=\"none\"\n            />\n          </defs>\n\n          <ellipse cx=\"825\" cy=\"475\" rx=\"800\" ry=\"380\" fill=\"#f7f2ea\" />\n\n          <text fill=\"#333\" fontSize=\"28\" fontFamily=\"Lexend Giga\" fontWeight=\"400\" letterSpacing=\"2\">\n            <textPath\n              href=\"#grayEllipsePath\"\n              ref={textPathRef}\n              startOffset=\"0%\"\n              textAnchor=\"start\"\n              dominantBaseline=\"hanging\"\n            >\n              {Array.from({ length: 5 }).map((_, i) => (\n                <React.Fragment key={i}>\n                  <tspan fill=\"#F5BC62\">Harmony</tspan>는{\" \"}\n                  <tspan fill=\"#F5BC62\">ElevenLabs</tspan>로 생성한 효과음을 시각적 기호로 정리해,\n                  사용자가 <tspan fill=\"#F5BC62\">기호만으로 직관적이고 창의적으로 작곡</tspan>할 수 있는 인터페이스를 제공합니다.{\" \"}\n                  <tspan fill=\"#F5BC62\">Elevenlabs</tspan>는 AI 기반 Text to Speech 도구로{\" \"}\n                  <tspan fill=\"#F5BC62\">원하는 효과음과 음성을 생성</tspan>할 수 있습니다.{\"   \"}\n                </React.Fragment>\n              ))}\n            </textPath>\n          </text>\n        </svg>\n\n        {/* 👇 스크롤 유도 아이콘 */}\n        <div\n          style={{\n            ...styles.scrollIcon,\n            ...(showScrollIcon && { opacity: 1 }),\n          }}\n        >\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"90\" height=\"82\" viewBox=\"0 0 90 82\" fill=\"none\">\n            <path d=\"M2 2L44.9259 27.6274\" stroke=\"#DAD1C2\" strokeWidth=\"3\" strokeLinecap=\"round\" />\n            <path d=\"M88 2.18359L45.0741 27.811\" stroke=\"#DAD1C2\" strokeWidth=\"3\" strokeLinecap=\"round\" />\n            <path d=\"M2 28L44.9259 53.6274\" stroke=\"#DAD1C2\" strokeWidth=\"3\" strokeLinecap=\"round\" />\n            <path d=\"M88 28.1836L45.0741 53.811\" stroke=\"#DAD1C2\" strokeWidth=\"3\" strokeLinecap=\"round\" />\n            <path d=\"M2 54L44.9259 79.6274\" stroke=\"#DAD1C2\" strokeWidth=\"3\" strokeLinecap=\"round\" />\n            <path d=\"M88 54.1836L45.0741 79.811\" stroke=\"#DAD1C2\" strokeWidth=\"3\" strokeLinecap=\"round\" />\n          </svg>\n        </div>\n      </div>\n    </section>\n  );\n}\n\nconst styles = {\n  section: {\n    height: \"100vh\",\n    width: \"100vw\",\n    backgroundColor: \"#4285f4\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    overflow: \"hidden\",\n    scrollSnapAlign: \"start\",\n  },\n  ellipse: {\n    width: \"165vw\",\n    height: \"95vw\",\n    maxWidth: \"1650px\",\n    maxHeight: \"950px\",\n    backgroundColor: \"transparent\",\n    position: \"relative\",\n  },\n  scrollIcon: {\n    position: \"absolute\",\n    top: \"43%\", // 중앙보다 약간 위\n    left: \"50%\",\n    transform: \"translate(-50%, 50%)\",\n    opacity: 0, // 시작 시 숨김\n    filter: \"drop-shadow(0 1px 3px rgba(0,0,0,0.08))\", // 약한 섀도우\n    animation: \"bounce 1.8s infinite ease-in-out\", // 통통 튀는 애니메이션\n    transition: \"opacity 2.5s ease\", // 페이드 인 부드럽게\n  },\n};\n\nexport default ComposeSlideSection;\n","import React from \"react\";\n\nfunction LastSection() {\n  return (\n    <section style={styles.section}>\n      <svg\n        width=\"100%\"\n        height=\"100%\"\n        viewBox=\"0 0 1920 900\"\n        preserveAspectRatio=\"xMidYMid meet\"\n        style={styles.svg}\n      >\n        {/* 큰 원 */}\n        <circle cx=\"900\" cy=\"450\" r=\"350\" fill=\"#FE6E3D\" />\n\n        {/* 오른쪽 원 (배경 + 테두리) */}\n        <circle\n          cx=\"1300\"\n          cy=\"250\"\n          r=\"180\"\n          fill=\"#F7F2EA\"\n          stroke=\"#FE6E3D\"\n          strokeWidth=\"6\"\n        />\n\n        {/* 왼쪽 상단 점 두 개 */}\n        <circle cx=\"50\" cy=\"80\" r=\"14\" fill=\"#FE6E3D\" />\n        <circle cx=\"50\" cy=\"130\" r=\"14\" fill=\"#FE6E3D\" />\n\n        {/* 왼쪽 하단 직선 */}\n        <rect x=\"40\" y=\"800\" width=\"14\" height=\"60\" fill=\"#FE6E3D\" />\n      </svg>\n\n      {/* 회전 이미지 (테두리 없음) */}\n      <img\n        src={`${process.env.PUBLIC_URL}/img/ab.png`}\n        alt=\"Anthony Braxton\"\n        style={{\n          position: \"absolute\",\n          top: \"300px\",\n          left: \"250px\",\n          width: \"400px\",\n          height: \"400px\",\n          borderRadius: \"50%\",\n          objectFit: \"cover\",\n          animation: \"spin 10s linear infinite\",\n        }}\n      />\n\n      {/* 설명 텍스트 */}\n      <div style={styles.textBlock}>\n        <div style={styles.name}>Anthony Braxton</div>\n        <div style={styles.subtitle}>소리를 그리는 작곡가</div>\n        <div style={styles.paragraph}>\n          Braxton은 다양한 소리를 시각적 도형으로 분류해,<br />\n          실험적이고 논리적인 방식으로 작곡했습니다.<br />\n          그의 방식처럼, 소리를 직관적으로 다룰 수 있는 <br />\n          창의적인 인터페이스를 개발하고자 했습니다.\n        </div>\n      </div>\n\n      <style>\n        {`\n          @keyframes spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n          }\n        `}\n      </style>\n    </section>\n  );\n}\n\nconst styles = {\n  section: {\n    width: \"100vw\",\n    height: \"100vh\",\n    overflow: \"hidden\",\n    position: \"relative\",\n    backgroundColor: \"#F7F2EA\",\n    fontFamily: \"Lexend Giga, sans-serif\",\n  },\n  svg: {\n    position: \"absolute\",\n    top: 0,\n    left: 0,\n  },\n  textBlock: {\n    position: \"absolute\",\n    right: \"120px\",\n    bottom: \"50px\", // ⬅️ 살짝 더 아래로 이동\n    textAlign: \"right\",\n    color: \"#000\",\n    lineHeight: \"1.6\",\n  },\n  name: {\n    fontSize: \"28px\",\n    fontWeight: \"bold\",\n    marginBottom: \"10px\",\n  },\n  subtitle: {\n    fontSize: \"20px\",\n    color: \"#FE6E3D\",\n    fontWeight: \"600\",\n    marginBottom: \"16px\",\n  },\n  paragraph: {\n    fontSize: \"18px\",\n    color: \"#333\",\n  },\n};\n\nexport default LastSection;\n","import React, { useState, useEffect, useRef } from \"react\";\r\nimport SoundPatternBuilder from '../SoundPatternBuilder';\r\n\r\n\r\n// 예제 도형 배열 (편집 불가, 재생 전용)\r\nconst presetShapes = [\r\n  {\r\n    \"id\": \"6a1d5867-15dc-46da-a227-3437e6ce46fe\",\r\n    \"xPercent\": 6.809569160588813,\r\n    \"yPercent\": 86.51832460732984,\r\n    \"type\": \"박자-1\",\r\n    \"size\": 40,\r\n    \"group\": \"p3\",\r\n    \"pitch\": \"C\",\r\n    \"lastPlayed\": 0,\r\n    \"customColor\": \"#FE6E3D\"\r\n  },\r\n  {\r\n    \"id\": \"ae8703a8-8928-4efc-83cc-3152e1b6b88d\",\r\n    \"xPercent\": 19.174581057845323,\r\n    \"yPercent\": 86.51832460732984,\r\n    \"type\": \"박자-5\",\r\n    \"size\": 40,\r\n    \"group\": \"p2\",\r\n    \"pitch\": \"C\",\r\n    \"lastPlayed\": 0,\r\n    \"customColor\": \"#F5BC62\"\r\n  },\r\n  {\r\n    \"id\": \"f4ad60a6-a621-4fca-bf0d-45b430247ea0\",\r\n    \"xPercent\": 40.5204963331092,\r\n    \"yPercent\": 85.86387434554975,\r\n    \"type\": \"박자-1\",\r\n    \"size\": 40,\r\n    \"group\": \"p3\",\r\n    \"pitch\": \"C\",\r\n    \"lastPlayed\": 0,\r\n    \"customColor\": \"#FE6E3D\"\r\n  },\r\n  {\r\n    \"id\": \"d5f942bf-e6de-473a-b97b-ae1df5d9e840\",\r\n    \"xPercent\": 73.97110746568735,\r\n    \"yPercent\": 85.99476439790575,\r\n    \"type\": \"박자-1\",\r\n    \"size\": 40,\r\n    \"group\": \"p3\",\r\n    \"pitch\": \"C\",\r\n    \"lastPlayed\": 0,\r\n    \"customColor\": \"#FE6E3D\"\r\n  },\r\n  {\r\n    \"id\": \"bf9bae38-00df-4c0b-befc-2b95fcac78e9\",\r\n    \"xPercent\": 53.60137734020688,\r\n    \"yPercent\": 85.86387434554975,\r\n    \"type\": \"박자-5\",\r\n    \"size\": 40,\r\n    \"group\": \"p12\",\r\n    \"pitch\": \"C\",\r\n    \"lastPlayed\": 0,\r\n    \"customColor\": \"#F5BC62\"\r\n  },\r\n  {\r\n    \"id\": \"055f70d2-f215-4f1c-a5f6-f07d32cf95e7\",\r\n    \"xPercent\": 86.66151441287167,\r\n    \"yPercent\": 86.64921465968587,\r\n    \"type\": \"박자-5\",\r\n    \"size\": 40,\r\n    \"group\": \"p9\",\r\n    \"pitch\": \"C\",\r\n    \"lastPlayed\": 0,\r\n    \"customColor\": \"#F5BC62\"\r\n  },\r\n  {\r\n    \"id\": \"b19790a7-0ffe-4433-aa06-443ffe1b90c6\",\r\n    \"xPercent\": 28.22056344583825,\r\n    \"yPercent\": 86.51832460732984,\r\n    \"type\": \"박자-9\",\r\n    \"size\": 40,\r\n    \"group\": \"p18\",\r\n    \"pitch\": \"C\",\r\n    \"lastPlayed\": 0,\r\n    \"customColor\": \"#4284F3\"\r\n  },\r\n  {\r\n    \"id\": \"31d88da5-2dee-4062-bd01-9d332aaf4b74\",\r\n    \"xPercent\": 62.25688566828644,\r\n    \"yPercent\": 85.99476439790575,\r\n    \"type\": \"박자-9\",\r\n    \"size\": 40,\r\n    \"group\": \"p1\",\r\n    \"pitch\": \"C\",\r\n    \"lastPlayed\": 0,\r\n    \"customColor\": \"#4284F3\"\r\n  },\r\n  {\r\n    \"id\": \"39665327-b8eb-4029-a214-bc76c0382174\",\r\n    \"xPercent\": 95.44718076092235,\r\n    \"yPercent\": 86.64921465968587,\r\n    \"type\": \"박자-9\",\r\n    \"size\": 40,\r\n    \"group\": \"p11\",\r\n    \"pitch\": \"C\",\r\n    \"lastPlayed\": 0,\r\n    \"customColor\": \"#4284F3\"\r\n  },\r\n  {\r\n    \"id\": \"a50d3f85-d5dc-4e4f-8f4b-52c2cf2ceaa8\",\r\n    \"xPercent\": 4.011171731209707,\r\n    \"yPercent\": 57.85340314136126,\r\n    \"type\": \"음계-1\",\r\n    \"size\": 40,\r\n    \"group\": \"p30\",\r\n    \"pitch\": \"C\",\r\n    \"lastPlayed\": 0,\r\n    \"customColor\": \"#6EC1A1\"\r\n  },\r\n  {\r\n    \"id\": \"f9c236b3-49c9-4710-95d6-36c4d1645fe6\",\r\n    \"xPercent\": 8.046070350314464,\r\n    \"yPercent\": 52.617801047120416,\r\n    \"type\": \"음계-2\",\r\n    \"size\": 40,\r\n    \"group\": \"p3\",\r\n    \"pitch\": \"C\",\r\n    \"lastPlayed\": 0,\r\n    \"customColor\": \"#FE6E3D\"\r\n  },\r\n  {\r\n    \"id\": \"99d1a942-5717-4620-8a58-e669dbd35dd9\",\r\n    \"xPercent\": 1.9937224216573284,\r\n    \"yPercent\": 42.14659685863874,\r\n    \"type\": \"음계-3\",\r\n    \"size\": 40,\r\n    \"group\": \"p25\",\r\n    \"pitch\": \"C\",\r\n    \"lastPlayed\": 0,\r\n    \"customColor\": \"#EF7A88\"\r\n  },\r\n  {\r\n    \"id\": \"708e5194-aa3c-4cfc-a34c-3c23c31b98a2\",\r\n    \"xPercent\": 13.187312139173752,\r\n    \"yPercent\": 36.910994764397905,\r\n    \"type\": \"음계-4\",\r\n    \"size\": 40,\r\n    \"group\": \"p29\",\r\n    \"pitch\": \"C\",\r\n    \"lastPlayed\": 0,\r\n    \"customColor\": \"#6EC1A1\"\r\n  },\r\n  {\r\n    \"id\": \"b15d3952-9034-493d-a23b-7f0e866d8f38\",\r\n    \"xPercent\": 13.187312139173752,\r\n    \"yPercent\": 42.14659685863874,\r\n    \"type\": \"음계-4\",\r\n    \"size\": 40,\r\n    \"group\": \"p29\",\r\n    \"pitch\": \"C\",\r\n    \"lastPlayed\": 0,\r\n    \"customColor\": \"#6EC1A1\"\r\n  },\r\n  {\r\n    \"id\": \"4774e5bb-4b27-463c-8f8d-a610a6443c66\",\r\n    \"xPercent\": 56.855327839484914,\r\n    \"yPercent\": 42.14659685863874,\r\n    \"type\": \"음계-5\",\r\n    \"size\": 40,\r\n    \"group\": \"p13\",\r\n    \"pitch\": \"C\",\r\n    \"lastPlayed\": 0,\r\n    \"customColor\": \"#6EC1A1\"\r\n  },\r\n  {\r\n    \"id\": \"34645e3a-2301-445e-a1af-ac4f2be6531b\",\r\n    \"xPercent\": 62.38704368825756,\r\n    \"yPercent\": 36.910994764397905,\r\n    \"type\": \"음계-7\",\r\n    \"size\": 40,\r\n    \"group\": \"p7\",\r\n    \"pitch\": \"C\",\r\n    \"lastPlayed\": 0,\r\n    \"customColor\": \"#F5BC62\"\r\n  },\r\n  {\r\n    \"id\": \"5c66cda6-a4c2-4f71-8b40-4ba59b752287\",\r\n    \"xPercent\": 70.19652488652484,\r\n    \"yPercent\": 33.90052356020942,\r\n    \"type\": \"음계-10\",\r\n    \"size\": 40,\r\n    \"group\": \"p3\",\r\n    \"pitch\": \"C\",\r\n    \"lastPlayed\": 0,\r\n    \"customColor\": \"#FE6E3D\"\r\n  },\r\n  {\r\n    \"id\": \"46cb3adc-bc81-4dc4-b44b-ae7db69a642e\",\r\n    \"xPercent\": 18.263474918047475,\r\n    \"yPercent\": 47.38219895287958,\r\n    \"type\": \"음계-6\",\r\n    \"size\": 40,\r\n    \"group\": \"p8\",\r\n    \"pitch\": \"C\",\r\n    \"lastPlayed\": 0,\r\n    \"customColor\": \"#F5BC62\"\r\n  },\r\n  {\r\n    \"id\": \"30695441-28e1-4dbb-b751-d030ad85a266\",\r\n    \"xPercent\": 25.942798096343626,\r\n    \"yPercent\": 57.85340314136126,\r\n    \"type\": \"음계-12\",\r\n    \"size\": 40,\r\n    \"group\": \"p3\",\r\n    \"pitch\": \"C\",\r\n    \"lastPlayed\": 0,\r\n    \"customColor\": \"#FE6E3D\"\r\n  },\r\n  {\r\n    \"id\": \"cb080201-ccdc-48d4-b318-9f8f83c611f5\",\r\n    \"xPercent\": 80.4790084642434,\r\n    \"yPercent\": 47.38219895287958,\r\n    \"type\": \"음계-18\",\r\n    \"size\": 40,\r\n    \"group\": \"p19\",\r\n    \"pitch\": \"C\",\r\n    \"lastPlayed\": 0,\r\n    \"customColor\": \"#4284F3\"\r\n  },\r\n  {\r\n    \"id\": \"1165935e-a702-4a4e-9b02-77f2d158fbe3\",\r\n    \"xPercent\": 89.13451679232296,\r\n    \"yPercent\": 47.38219895287958,\r\n    \"type\": \"음계-8\",\r\n    \"size\": 40,\r\n    \"group\": \"p25\",\r\n    \"pitch\": \"C\",\r\n    \"lastPlayed\": 0,\r\n    \"customColor\": \"#EF7A88\"\r\n  },\r\n  {\r\n    \"id\": \"e2b205c7-0e14-460f-a0a8-1a840705ece2\",\r\n    \"xPercent\": 15.465077488668372,\r\n    \"yPercent\": 57.85340314136126,\r\n    \"type\": \"음계-9\",\r\n    \"size\": 40,\r\n    \"group\": \"p18\",\r\n    \"pitch\": \"C\",\r\n    \"lastPlayed\": 0,\r\n    \"customColor\": \"#4284F3\"\r\n  },\r\n  {\r\n    \"id\": \"dfd490b8-3037-4853-8762-39b1e2416a67\",\r\n    \"xPercent\": 25.877719086358063,\r\n    \"yPercent\": 31.675392670157066,\r\n    \"type\": \"음계-9\",\r\n    \"size\": 40,\r\n    \"group\": \"p11\",\r\n    \"pitch\": \"C\",\r\n    \"lastPlayed\": 0,\r\n    \"customColor\": \"#4284F3\"\r\n  },\r\n  {\r\n    \"id\": \"c91ed69e-9ad4-4af6-a615-d7562a40f56a\",\r\n    \"xPercent\": 32.51577810488524,\r\n    \"yPercent\": 63.089005235602095,\r\n    \"type\": \"음계-2\",\r\n    \"size\": 40,\r\n    \"group\": \"p4\",\r\n    \"pitch\": \"C\",\r\n    \"lastPlayed\": 0,\r\n    \"customColor\": \"#EF7A88\"\r\n  },\r\n  {\r\n    \"id\": \"8d2fcc31-076e-4b93-a119-0e784cf6b744\",\r\n    \"xPercent\": 35.18401751429323,\r\n    \"yPercent\": 42.14659685863874,\r\n    \"type\": \"음계-3\",\r\n    \"size\": 40,\r\n    \"group\": \"p18\",\r\n    \"pitch\": \"C\",\r\n    \"lastPlayed\": 0,\r\n    \"customColor\": \"#4284F3\"\r\n  },\r\n  {\r\n    \"id\": \"ed806f16-2cdb-4d8c-9955-3e8c4b253ba3\",\r\n    \"xPercent\": 38.30780999360014,\r\n    \"yPercent\": 47.38219895287958,\r\n    \"type\": \"음계-1\",\r\n    \"size\": 40,\r\n    \"group\": \"p30\",\r\n    \"pitch\": \"C\",\r\n    \"lastPlayed\": 0,\r\n    \"customColor\": \"#6EC1A1\"\r\n  },\r\n  {\r\n    \"id\": \"722d5b14-5340-4a98-a2b1-51d3186776a0\",\r\n    \"xPercent\": 40.325259303152514,\r\n    \"yPercent\": 36.910994764397905,\r\n    \"type\": \"음계-15\",\r\n    \"size\": 40,\r\n    \"group\": \"p25\",\r\n    \"pitch\": \"C\",\r\n    \"lastPlayed\": 0,\r\n    \"customColor\": \"#EF7A88\"\r\n  },\r\n  {\r\n    \"id\": \"53026404-215b-49f3-b3e6-e025fe1c445e\",\r\n    \"xPercent\": 43.774446832387234,\r\n    \"yPercent\": 52.617801047120416,\r\n    \"type\": \"음계-9\",\r\n    \"size\": 40,\r\n    \"group\": \"p13\",\r\n    \"pitch\": \"C\",\r\n    \"lastPlayed\": 0,\r\n    \"customColor\": \"#6EC1A1\"\r\n  },\r\n  {\r\n    \"id\": \"9683ee8d-cd39-4472-86ea-e3e7b704e884\",\r\n    \"xPercent\": 43.774446832387234,\r\n    \"yPercent\": 57.85340314136126,\r\n    \"type\": \"음계-4\",\r\n    \"size\": 40,\r\n    \"group\": \"p15\",\r\n    \"pitch\": \"C\",\r\n    \"lastPlayed\": 0,\r\n    \"customColor\": \"#F5BC62\"\r\n  },\r\n  {\r\n    \"id\": \"93511b4c-be01-40e2-8846-c263e8e4a4b3\",\r\n    \"xPercent\": 49.95695278101549,\r\n    \"yPercent\": 52.617801047120416,\r\n    \"type\": \"음계-2\",\r\n    \"size\": 40,\r\n    \"group\": \"p3\",\r\n    \"pitch\": \"C\",\r\n    \"lastPlayed\": 0,\r\n    \"customColor\": \"#FE6E3D\"\r\n  },\r\n  {\r\n    \"id\": \"54c9618c-aeab-4b69-a899-43d4a44f3f12\",\r\n    \"xPercent\": 54.96803654990365,\r\n    \"yPercent\": 68.32460732984293,\r\n    \"type\": \"음계-11\",\r\n    \"size\": 40,\r\n    \"group\": \"p11\",\r\n    \"pitch\": \"C\",\r\n    \"lastPlayed\": 0,\r\n    \"customColor\": \"#4284F3\"\r\n  },\r\n  {\r\n    \"id\": \"60169d07-c974-48df-87db-5b6e43e17607\",\r\n    \"xPercent\": 95.12178571099454,\r\n    \"yPercent\": 57.85340314136126,\r\n    \"type\": \"음계-6\",\r\n    \"size\": 40,\r\n    \"group\": \"p22\",\r\n    \"pitch\": \"C\",\r\n    \"lastPlayed\": 0,\r\n    \"customColor\": \"#6EC1A1\"\r\n  },\r\n  {\r\n    \"id\": \"3be752d9-7c94-480b-b58e-f242859bcf8a\",\r\n    \"xPercent\": 55.81406367971594,\r\n    \"yPercent\": 52.617801047120416,\r\n    \"type\": \"음계-3\",\r\n    \"size\": 40,\r\n    \"group\": \"p3\",\r\n    \"pitch\": \"C\",\r\n    \"lastPlayed\": 0,\r\n    \"customColor\": \"#FE6E3D\"\r\n  },\r\n  {\r\n    \"id\": \"da9ed17f-5528-4cea-b733-c610523e5632\",\r\n    \"xPercent\": 65.1203621076511,\r\n    \"yPercent\": 47.38219895287958,\r\n    \"type\": \"음계-1\",\r\n    \"size\": 40,\r\n    \"group\": \"p24\",\r\n    \"pitch\": \"C\",\r\n    \"lastPlayed\": 0,\r\n    \"customColor\": \"#EF7A88\"\r\n  },\r\n  {\r\n    \"id\": \"160b2c3b-eb50-46b4-8474-6a942a6a2c85\",\r\n    \"xPercent\": 68.11399656698688,\r\n    \"yPercent\": 47.38219895287958,\r\n    \"type\": \"음계-1\",\r\n    \"size\": 40,\r\n    \"group\": \"p25\",\r\n    \"pitch\": \"C\",\r\n    \"lastPlayed\": 0,\r\n    \"customColor\": \"#EF7A88\"\r\n  },\r\n  {\r\n    \"id\": \"41f3a231-2442-477e-a891-930408effab8\",\r\n    \"xPercent\": 68.7647866668425,\r\n    \"yPercent\": 63.089005235602095,\r\n    \"type\": \"음계-7\",\r\n    \"size\": 40,\r\n    \"group\": \"p5\",\r\n    \"pitch\": \"C\",\r\n    \"lastPlayed\": 0,\r\n    \"customColor\": \"#F5BC62\"\r\n  },\r\n  {\r\n    \"id\": \"1ecbd78a-5d26-4903-800e-6ca18cefd932\",\r\n    \"xPercent\": 71.2377890462938,\r\n    \"yPercent\": 63.089005235602095,\r\n    \"type\": \"음계-8\",\r\n    \"size\": 40,\r\n    \"group\": \"p15\",\r\n    \"pitch\": \"C\",\r\n    \"lastPlayed\": 0,\r\n    \"customColor\": \"#F5BC62\"\r\n  },\r\n  {\r\n    \"id\": \"b0da3777-16ee-4b29-93c6-2e056703d2c0\",\r\n    \"xPercent\": 75.33776667538412,\r\n    \"yPercent\": 63.089005235602095,\r\n    \"type\": \"음계-9\",\r\n    \"size\": 40,\r\n    \"group\": \"p18\",\r\n    \"pitch\": \"C\",\r\n    \"lastPlayed\": 0,\r\n    \"customColor\": \"#4284F3\"\r\n  },\r\n  {\r\n    \"id\": \"e92458ed-310d-4f65-95bf-c740a8a3e148\",\r\n    \"xPercent\": 78.26632212473434,\r\n    \"yPercent\": 63.089005235602095,\r\n    \"type\": \"음계-9\",\r\n    \"size\": 40,\r\n    \"group\": \"p18\",\r\n    \"pitch\": \"C\",\r\n    \"lastPlayed\": 0,\r\n    \"customColor\": \"#4284F3\"\r\n  },\r\n  {\r\n    \"id\": \"5d947507-3d01-4736-baf3-bc89f4bad6a8\",\r\n    \"xPercent\": 46.312528221824095,\r\n    \"yPercent\": 49.86910994764398,\r\n    \"type\": \"배경음-3\",\r\n    \"size\": 40,\r\n    \"group\": \"p1\",\r\n    \"pitch\": \"C\",\r\n    \"lastPlayed\": 0,\r\n    \"customColor\": \"#4284F3\"\r\n  }\r\n];\r\n\r\nconst styles = {\r\n  scrollIcon: {\r\n    position: \"absolute\",\r\n    bottom: \"30px\",\r\n    left: \"50%\",\r\n    transform: \"translateX(-50%)\",\r\n    transition: \"opacity 0.5s ease\",\r\n    opacity: 0,\r\n    zIndex: 999,\r\n  },\r\n};\r\n\r\n\r\n// 🔽 함수 정의는 여기서 시작!\r\nfunction SPBex() {\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [resetPlayback, setResetPlayback] = useState(false);\r\n  const [showScrollIcon, setShowScrollIcon] = useState(false);\r\n\r\n  useEffect(() => {\r\n  const timer = setTimeout(() => {\r\n    setShowScrollIcon(true);\r\n  }, 2000); // 2초 후 보여주기\r\n  return () => clearTimeout(timer);\r\n}, []);\r\n\r\n\r\n\r\n  const handlePlaybackEnd = () => {\r\n    setShowModal(true);\r\n  };\r\n\r\n  const handleRetry = () => {\r\n    setShowModal(false);\r\n    setResetPlayback(true);\r\n    setTimeout(() => setResetPlayback(false), 100);\r\n  };\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        backgroundColor: \"#F7F2EA\",\r\n        width: \"100%\",\r\n        height: \"100vh\",\r\n        position: \"relative\",\r\n      }}\r\n    >\r\n      <SoundPatternBuilder\r\n        presetShapes={presetShapes}\r\n        readOnly={true}\r\n        onPlaybackEnd={handlePlaybackEnd}\r\n        resetPlayback={resetPlayback}\r\n      />\r\n\r\n      {showModal && (\r\n  <div\r\n    style={{\r\n      position: \"absolute\",\r\n      top: 0,\r\n      left: 0,\r\n      right: 0,\r\n      bottom: 0,\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      alignItems: \"center\",\r\n      justifyContent: \"center\",\r\n      zIndex: 1000,\r\n    }}\r\n  >\r\n    {/* 🔸 중앙 창 모양 */}\r\n    <div\r\n      style={{\r\n        backgroundColor: \"rgba(255, 255, 255, 1)\",\r\n        borderRadius: \"20px\",\r\n        padding: \"30px 40px\",\r\n        textAlign: \"center\",\r\n        maxWidth: \"300px\",\r\n      }}\r\n    >\r\n      <div style={{ fontSize: \"20px\", marginBottom: \"20px\", color: \"#333\" }}>\r\n        다시 들으시겠어요?\r\n      </div>\r\n\r\n      <button\r\n        style={{\r\n          padding: \"10px 20px\",\r\n          fontSize: \"16px\",\r\n          border: \"none\",\r\n          borderRadius: \"8px\",\r\n          backgroundColor: \"#FE6E3D\",\r\n          color: \"white\",\r\n          cursor: \"pointer\",\r\n          marginBottom: \"30px\",\r\n        }}\r\n        onClick={handleRetry}\r\n      >\r\n        다시 듣기\r\n      </button>\r\n\r\n      <div style={{ textAlign: \"center\" }}>\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"90\" height=\"82\" viewBox=\"0 0 90 82\" fill=\"none\">\r\n          <path d=\"M2 2L44.9259 27.6274\" stroke=\"#4C3A2E\" strokeWidth=\"3\" strokeLinecap=\"round\" />\r\n          <path d=\"M88 2.18359L45.0741 27.811\" stroke=\"#4C3A2E\" strokeWidth=\"3\" strokeLinecap=\"round\" />\r\n          <path d=\"M2 28L44.9259 53.6274\" stroke=\"#4C3A2E\" strokeWidth=\"3\" strokeLinecap=\"round\" />\r\n          <path d=\"M88 28.1836L45.0741 53.811\" stroke=\"#4C3A2E\" strokeWidth=\"3\" strokeLinecap=\"round\" />\r\n          <path d=\"M2 54L44.9259 79.6274\" stroke=\"#4C3A2E\" strokeWidth=\"3\" strokeLinecap=\"round\" />\r\n          <path d=\"M88 54.1836L45.0741 79.811\" stroke=\"#4C3A2E\" strokeWidth=\"3\" strokeLinecap=\"round\" />\r\n        </svg>\r\n\r\n        <div style={{ marginTop: \"10px\", fontSize: \"16px\", color: \"#4C3A2E\" }}>\r\n          스크롤해서 작곡하러 가기\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n)}\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SPBex;","import React, { useEffect, useRef, useState } from 'react';\nimport SoundPatternBuilder from './SoundPatternBuilder';\nimport MatterScene from './components/MatterScene';\nimport GallerySection from './components/GallerySection';\nimport ComposeSlideSection from './components/ComposeSlideSection';\nimport LastSection from \"./components/LastSection\";\nimport SPBex from './components/SPBex';\n\nfunction App() {\n  const audioRef = useRef(null);\n  const matterRef = useRef(null);\n  const soundRef = useRef(null);\n  const slideRef = useRef(null);\n\n  const [isMatterVisible, setIsMatterVisible] = useState(false);\n  const [isSoundVisible, setIsSoundVisible] = useState(false);\n  const [isSlideVisible, setIsSlideVisible] = useState(false);\n\n  // 공통 오디오 효과\n  useEffect(() => {\n    audioRef.current = new Audio(`${process.env.PUBLIC_URL}/sound/for_site/typewriter.mp3`);\n    audioRef.current.volume = 0.5;\n\n    const playSound = () => {\n      if (!audioRef.current) return;\n      audioRef.current.currentTime = 0;\n      audioRef.current.play().catch((e) => console.error(\"오디오 재생 실패:\", e));\n    };\n\n    const handleWheel = () => playSound();\n    const handleClick = () => playSound();\n\n    window.addEventListener(\"wheel\", handleWheel);\n    window.addEventListener(\"click\", handleClick);\n\n    return () => {\n      window.removeEventListener(\"wheel\", handleWheel);\n      window.removeEventListener(\"click\", handleClick);\n    };\n  }, []);\n\n  // IntersectionObserver로 섹션 감지\n  useEffect(() => {\n    const observer = new IntersectionObserver(\n      ([entry]) => setIsMatterVisible(entry.isIntersecting),\n      { threshold: 0.1 }\n    );\n    if (matterRef.current) observer.observe(matterRef.current);\n    return () => observer.disconnect();\n  }, []);\n\n  useEffect(() => {\n    const observer = new IntersectionObserver(\n      ([entry]) => setIsSoundVisible(entry.isIntersecting),\n      { threshold: 0.1 }\n    );\n    if (soundRef.current) observer.observe(soundRef.current);\n    return () => observer.disconnect();\n  }, []);\n\n  useEffect(() => {\n  const observer = new IntersectionObserver(\n    ([entry]) => setIsSlideVisible(entry.isIntersecting),\n    { threshold: 0.1 }\n  );\n  if (slideRef.current) observer.observe(slideRef.current);\n  return () => observer.disconnect();\n}, []);\n\n  return (\n    <div className=\"container\">\n      <nav className=\"navbar\">\n        <ul>\n          <li><a href=\"#section1\">Home</a></li>\n          <li><a href=\"#section3\">Composite</a></li>\n          <li><a href=\"#section4\">Gallery</a></li>\n          <li><a href=\"#section5\">Anthony Braxton</a></li>\n        </ul>\n      </nav>\n\n      {/* 첫 번째 화면 */}\n      <section\n        className=\"section\"\n        id=\"section1\"\n        style={{\n          position: 'relative',\n          height: '100vh',\n          overflow: 'hidden',\n        }}\n        ref={matterRef}\n      >\n        <MatterScene isVisible={isMatterVisible} />\n\n        <h1\n          style={{\n            position: 'absolute',\n            top: '5vh',\n            left: 0,\n            width: '100%',\n            height: '40vh',\n            overflow: 'hidden',\n            margin: 0,\n            padding: 0,\n            zIndex: 2,\n            pointerEvents: 'none',\n            display: 'flex',\n            alignItems: 'center',\n          }}\n        >\n          <div className=\"marquee\">\n            <div className=\"marquee-content\">\n              {[...Array(10)].map((_, idx) => (\n                <span key={idx} style={{ display: 'inline-block', marginRight: '0vw' }}>\n                  <span style={{ color: '#FE6E3D', fontFamily: 'Lexend Giga', fontWeight: 500 }}>H</span>\n                  <span style={{ color: '#000000', fontFamily: 'Lexend Giga', fontWeight: 300 }}>a</span>\n                  <span style={{ color: '#6EC1A1', fontFamily: 'Lexend Giga', fontWeight: 500 }}>r</span>\n                  <span style={{ color: '#F5BC62', fontFamily: 'Lexend Giga', fontWeight: 100 }}>m</span>\n                  <span style={{ color: '#4284F3', fontFamily: 'Lexend Giga', fontWeight: 800 }}>o</span>\n                  <span style={{ color: '#000000', fontFamily: 'Lexend Giga', fontWeight: 100 }}>n</span>\n                  <span style={{ color: '#EF7A88', fontFamily: 'Lexend Giga', fontWeight: 300 }}>y</span>\n                </span>\n              ))}\n            </div>\n          </div>\n        </h1>\n      </section>\n\n    {/* 두 번째 화면 */}\n<section\n  id=\"section2\"\n  ref={slideRef}\n  style={{\n    backgroundColor: \"#4285f4\",\n  }}\n>\n  <div>\n    <ComposeSlideSection isVisible={isSlideVisible} />\n  </div>\n</section>\n\n{/* 세 번째 화면 */}\n      <section className=\"section\" id=\"section2-1\" ref={soundRef} style={{ backgroundColor: \"#F7F2EA\" }}>\n        <div className=\"content\">\n          <SPBex />\n        </div>\n      </section>\n\n\n\n      {/* 세 번째 화면 */}\n      <section className=\"section\" id=\"section3\" ref={soundRef}>\n        <div className=\"content\">\n          <SoundPatternBuilder isVisible={isSoundVisible} />\n        </div>\n      </section>\n\n      {/* 네 번째 화면 */}\n      <section\n  className=\"section\"\n  id=\"section4\"\n  style={{\n    height: '100vh',\n    overflowY: 'auto',\n    paddingTop: '40%', // 헤더 높이만큼 조절 (필요에 따라 더 늘려도 돼)\n    backgroundColor: \"#6EC1A1\",\n  }}\n>\n  <div className=\"content\">\n    <GallerySection />\n  </div>\n</section>\n\n      {/* 다섯 번째 화면 */}\n      <section className=\"section\" id=\"section5\"\n       style={{\n    backgroundColor: \"#F7F2EA\",\n    height: \"100vh\",\n    width: \"100vw\",     // ✨ 전체 너비 확보\n    margin: 0,           // ✨ 여백 제거\n    padding: 0,          // ✨ 여백 제거\n    overflow: \"hidden\",  // ✨ 내부 넘침 방지\n  }} >\n        <div className=\"content\">\n          <LastSection /> {/* ✅ 이 부분만 추가해주면 돼 */}\n        </div>\n      </section>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}